function GetAddLessTab() { var t = $("#cmbBillio").val(); $("#Addlesstab").hide(), $("#Generaltab").show(), $("#psspinner2").show(), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetAddlessGrid", data: { mode: t }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide() } }) } function OnBillChange() { $("#cmbBillio").val(); GetAddLessTab() } function GetGeneral() { $("#Addlesstab").show(), $("#Generaltab").hide(); var t = 0; $("#rdReceipts").is(":checked") ? t = 2 : $("#rdPayments").is(":checked") && (t = 1); var e = $("#txtreturndt").val(); $("#psspinner2").show(), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: t, dt: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide() } }) } function tab1Addless() { GetAddLessTab() } function tab2Adjustments() { var t = $("#cmbBillio").val(); $("#psspinneradj").show(), 0 != t && $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetAdjustmentGrid", data: { mode: t }, success: function (t) { $("#tab2").html(t), $("#psspinneradj").hide() } }) } function OpeningClosingBal() { var t = $("#txtreturndt").val(); $.ajax({ type: "get", url: "../ReceiptsandPayments/getopeningclosing", data: { dt: t }, success: function (t) { $("#openingbal").val(t.split(",")[0]), $("#closingbal").val(t.split(",")[1]), $("#submitbuttons").find("button").attr("disabled", !1), $("#accountbal").html(""); var e = 0; $("input.mustprovide").each(function () { e += Number($(this).val()) }), $("#totalamount").val(e) } }) } function CalTotal(t) { var e = 0; $("input.mustprovide").each(function () { e += Number($(this).val()) }), $("#totalamount").val(e) } function OnDateChange() { ReceiptsChange(), PaymentsChange(), ContraChange() } function PSReturnsOutstangingCash() { if (0 == $("#tblreturnscash").find("tr").length) { var t = 1, e = ""; e = e + "<tr id='trrc_" + t + "'><td id='tdReturnAccountc_" + t + "' ><select style='width:200px' class='mustprovide' id='cmbReturnAccountsc_" + t + "' onchange='AccountChange(this)' class='mustprovide'></select> <b id='cmbReturnAccountscdata_" + t + "'></b></td><td ><input type='text'   id='Receiptc_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucherc_" + t + "'/></td><td><input type=text id='txtdescc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepnoc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdtc_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkc_" + t + "' /> Monthly Payment Tax</td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturnscash").html(e) } else { var t = $("#tblreturnscash").find("tr").length + 1, n = t - 1, a = $("#tblreturnscash tr:nth-child(" + n + ")").attr("id"), c = a.split("_")[1]; $("#tblreturnscash tr:nth-child(" + n + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRowcash(" + c + ")'><i class='fa fa-trash'></i></button>"); var e = ""; e = e + "<tr id='trrc_" + t + "'><td id='tdReturnAccountc_" + t + "'><select style='width:200px' id='cmbReturnAccountsc_" + t + "' onchange='AccountChange(this)' class='mustprovide' ></select> <b id='cmbReturnAccountscdata_" + t + "'></b></td><td ><input type='text'  id='Receiptc_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucherc_" + t + "'/></td><td><input type='text' id='txtdescc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepnoc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdtc_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkc_" + t + "' /> Monthly Payment Tax</td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturnscash tr").last().after(e) } $("#txtrepdtc_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtc_" + t).datepicker("getDate")); $("#txtrepdtc_" + t).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (e) { $.each(e, function () { $("#cmbReturnAccountsc_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbReturnAccountsc_" + t).select2() } function PSReturnsCash() { if (0 == $("#tblreturnscash").find("tr").length) { var t = 1, e = ""; e = e + "<tr id='trrc_" + t + "'><td id='tdReturnAccountc_" + t + "'><select style='width:200px' id='cmbReturnAccountsc_" + t + "' onchange='AccountChange(this)' class='mustprovide'  ></select><b id='cmbReturnAccountscdata_" + t + "'></b></td><td ><input type='text'  id='Receiptc_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucherc_" + t + "'/></td><td><input type=text id='txtdescc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepnoc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdtc_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkc_" + t + "' /> Monthly Payment Tax</td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturnscash").html(e) } else { var t = $("#tblreturnscash").find("tr").length + 1, n = t - 1, a = $("#tblreturnscash tr:nth-child(" + n + ")").attr("id"), c = a.split("_")[1]; $("#tblreturnscash tr:nth-child(" + n + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRowcash(" + c + ")'><i class='fa fa-trash'></i></button>"); var e = ""; e = e + "<tr id='trrc_" + t + "'><td id='tdReturnAccountc_" + t + "'><select style='width:200px' id='cmbReturnAccountsc_" + t + "' onchange='AccountChange(this)' class='mustprovide' ></select></td><td ><input type='text'  id='Receiptc_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)'/></td><td><input type=text id='txtvoucherc_" + t + "'/></td><td><input type='text' id='txtdescc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepnoc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdtc_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkc_" + t + "' /> Monthly Payment Tax</td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturnscash tr").last().after(e) } $("#txtrepdtc_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtc_" + t).datepicker("getDate")); $("#txtrepdtc_" + t).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (e) { $.each(e, function () { $("#cmbReturnAccountsc_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbReturnAccountsc_" + t).select2(), $("#Addlesstab").show(), $("#Generaltab").hide() } function PSReturns() { if (0 == $("#tblreturns").find("tr").length) { var t = 1, e = ""; e = e + "<tr id='trr_" + t + "'><td id='tdReturnAccount_" + t + "'><select style='width:200px' id='cmbReturnAccounts_" + t + "' onchange='AccountChange(this)' class='mustprovide' ></select><b id='cmbReturnAccountsdata_" + t + "'></b></td><td ><input type='text'  id='Receipt_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucher_" + t + "'/></td><td><input type=text id='txtdesc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepno_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdt_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chk_" + t + "' /> Monthly Payment Tax</td>"; e = e + "<td id='tdmode_" + t + "'><select style='width:100px' id='cmbtrans_" + t + "' onchange='Getrelatedcheques(this)' ></select></td>", e = $("#rdPayments").is(":checked") ? e + "<td id='tdchkno_" + t + "'><select style='width:100px' id='ddlchkno_" + t + "'></select></td>" : e + "<td id='tdchkno_" + t + "'><input type='text'  id='txtchkno_" + t + "'  /></td>", e = e + "<td  id='tdchkdt_" + t + "'><input type='text' style='width:100px' id='txtchkdt_" + t + "'/></td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturns").html(e) } else { var t = $("#tblreturns").find("tr").length + 1, n = t - 1, a = $("#tblreturns tr:nth-child(" + n + ")").attr("id"), c = a.split("_")[1]; $("#tblreturns tr:nth-child(" + n + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRow(" + c + ")'><i class='fa fa-trash'></i></button>"); var e = ""; e = e + "<tr id='trr_" + t + "'><td id='tdReturnAccount_" + t + "'><select style='width:200px' id='cmbReturnAccounts_" + t + "' onchange='AccountChange(this)' class='mustprovide' ></select><b id='cmbReturnAccountsdata_" + t + "'></b></td><td ><input type='text'  id='Receipt_" + t + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucher_" + t + "'/></td><td><input type='text' id='txtdesc_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepno_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdt_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chk_" + t + "' /> Monthly Payment Tax</td>"; e = e + "<td id='tdmode_" + t + "'><select style='width:100px' id='cmbtrans_" + t + "' onchange='Getrelatedcheques(this)' ></select></td>", e = $("#rdPayments").is(":checked") ? e + "<td id='tdchkno_" + t + "' ><select style='width:100px' id='ddlchkno_" + t + "'></select></td>" : e + "<td id='tdchkno_" + t + "' ><input type='text'  id='txtchkno_" + t + "'  /></td>", e = e + "<td id='tdchkdt_" + t + "'><input type='text' style='width:100px' id='txtchkdt_" + t + "'/></td><td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturns tr").last().after(e) } $("#txtrepdt_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdt_" + t).datepicker("getDate")); $("#txtrepdt_" + t).datepicker("setDate", a) } }), $("#txtchkdt_" + t).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (e) { $.each(e, function () { $("#cmbReturnAccounts_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbReturnAccounts_" + t).select2(), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (e) { $.each(e, function () { $("#cmbtrans_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbtrans_" + t).select2() } function AddChangeIC(t) { "" != $("#AddIC_" + t).val() && $("#LessIC_" + t).val("") } function LessChangeIC(t) { "" != $("#LessIC_" + t).val() && $("#AddIC_" + t).val("") } function AddChangeIB(t) { "" != $("#AddIB_" + t).val() && $("#LessIB_" + t).val("") } function LessChangeIB(t) { "" != $("#LessIB_" + t).val() && $("#AddIB_" + t).val("") } function AddInwardBank() { if (0 == $("#tblInwardbank").find("tr").length) { var t = 1, e = ""; e = e + "<tr id='trrIB_" + t + "'><td id='tdReturnAccountIB_" + t + "'><select style='width:200px' id='cmbReturnAccountsIB_" + t + "'  ></select></td><td ><input type='text'  id='AddIB_" + t + "' onfocusout='AddChangeIB(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='LessIB_" + t + "' onfocusout='LessChangeIB(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='PercentIB_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' /></td><td><input type=text id='txtvoucherIB_" + t + "'/></td><td><input type=text id='txtrepnoIB_" + t + "'/></td><td><input type=text id='txtrepdtIB_" + t + "'/></td><td id='tdmodeIB_" + t + "'><select style='width:100px' id='cmbtransIB_" + t + "' onchange='Getrelatedcheques(this)' ></select></td>", e = $("#rdPayments").is(":checked") ? e + "<td id='tdchknoIB_" + t + "'><select style='width:100px' id='ddlchknoIB_" + t + "'></select></td>" : e + "<td id='tdchknoIB_" + t + "'><input type='text'  id='txtchknoIB_" + t + "'  /></td>", e = e + "<td  id='tdchkdtIB_" + t + "'><input type='text' style='width:100px' id='txtchkdtIB_" + t + "'/></td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddInwardBank(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblInwardbank").html(e) } else { var t = $("#tblInwardbank").find("tr").length + 1, n = t - 1, a = $("#tblreturns tr:nth-child(" + n + ")").attr("id"), c = a.split("_")[1]; $("#tblInwardbank tr:nth-child(" + n + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteInwardBank(" + c + ")'><i class='fa fa-trash'></i></button>"); var e = ""; e = e + "<tr id='trrIB_" + t + "'><td id='tdReturnAccountIB_" + t + "'><select style='width:200px' id='cmbReturnAccountsIB_" + t + "'  ></select></td><td ><input type='text'  id='AddIB_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='LessIB_" + t + "' onfocusout='LessChangeIB(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='PercentIB_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' /></td><td><input type=text id='txtvoucherIB_" + t + "'/></td><td><input type=text id='txtrepnoIB_" + t + "'/></td><td><input type=text id='txtrepdtIB_" + t + "'/></td><td id='tdmodeIB_" + t + "'><select style='width:100px' id='cmbtransIB_" + t + "' onchange='Getrelatedcheques(this)' ></select></td>", e = $("#rdPayments").is(":checked") ? e + "<td id='tdchknoIB_" + t + "' ><select style='width:100px' id='ddlchknoIB_" + t + "'></select></td>" : e + "<td id='tdchknoIB_" + t + "' ><input type='text'  id='txtchknoIB_" + t + "'  /></td>", e = e + "<td id='tdchkdtIB_" + t + "'><input type='text' style='width:100px' id='txtchkdtIB_" + t + "'/></td><td><button class='btn btn-info btn-xs'  type='button'  onclick='AddInwardBank(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblInwardbank tr").last().after(e) } $("#txtrepdtIB_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtIB_" + t).datepicker("getDate")); $("#txtrepdtIB_" + t).datepicker("setDate", a) } }), $("#txtchkdtIB_" + t).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (e) { $.each(e, function () { $("#cmbReturnAccountsIB_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccountsIB_" + t).select2() } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (e) { $.each(e, function () { $("#cmbtransIB_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbtransIB_" + t).select2() } }) } function AccountChange(t) { var e = $(t).attr("id"), n = $(t).val(), a = $("#" + e + " :selected").text(); $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/IsTaxAccount", data: { id: n }, success: function (t) { (1 == t || "True" == t) && $("#rdPayments").is(":checked") ? ($(".notmonthly").hide(), $(".monthly").show()) : ($(".notmonthly").show(), $(".monthly").hide()) } }), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetAccountBal", data: { account: n }, success: function (t) { var e = ""; t > 0 ? e = "Credit-" : 0 > t && (e = "Debit-"), $("#accountbal").text(a + " (" + e + " " + t + ")") } }) } function AddInwardCash() { if (0 == $("#tblInwardcash").find("tr").length) { var t = 1, e = ""; e = e + "<tr id='trrIC_" + t + "' style='font-size:11px'><td id='tdReturnAccountIC_" + t + "'><select style='width:200px' id='cmbReturnAccountsIC_" + t + "'  onchange='AccountChange(this)' class='mustprovide'></select></td><td ><input type='text' style='width:80px'  id='AddIC_" + t + "' onfocusout='AddChangeIC(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td ><input type='text' style='width:80px'  id='LessIC_" + t + "' onfocusout='LessChangeIC(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='PercentIC_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' /></td><td><input type=text id='txtvoucherIC_" + t + "'/></td><td><input type=text id='txtdetailsIC_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepnoIC_" + t + "'/></td><td class='notmonthly'><input type=text id='txtrepdtIC_" + t + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkIC_" + t + "' /></td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddInwardCash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblInwardcash").html(e) } else { var t = $("#tblInwardcash").find("tr").length + 1, n = t - 1, a = $("#tblInwardcash tr:nth-child(" + n + ")").attr("id"), c = a.split("_")[1]; $("#tblInwardcash tr:nth-child(" + n + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteInwardCash(" + c + ")'><i class='fa fa-trash'></i></button>"); var e = ""; e = e + "<tr id='trrIC_" + t + "' style='font-size:11px'><td id='tdReturnAccountIC_" + t + "'><select style='width:200px' id='cmbReturnAccountsIC_" + t + "'  ></select></td><td ><input type='text' style='width:80px' id='AddIC_" + t + "' onfocusout='AddChangeIC(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text' style='width:80px'  id='LessIC_" + t + "' onfocusout='LessChangeIC(" + t + ")' onkeypress='return isNumberStudentMarksKey(event)' /></td><td ><input type='text'  id='PercentIC_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' /></td><td><input type=text id='txtvoucherIC_" + t + "'/></td><td><input type=text id='txtdetailsIC_" + t + "'/></td><td><input type=text id='txtrepnoIC_" + t + "'/></td><td><input type=text id='txtrepdtIC_" + t + "'/></td>", e = e + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddInwardCash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblInwardcash tr").last().after(e) } $("#txtrepdtIC_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtIc_" + t).datepicker("getDate")); $("#txtrepdtIc_" + t).datepicker("setDate", a) } }), $("#txtchkdtIC_" + t).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (e) { $.each(e, function () { $("#cmbReturnAccountsIC_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccountsIC_" + t).select2() } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (e) { $.each(e, function () { $("#cmbtransIC_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbtransIC_" + t).select2() } }) } function AddingreturnRow(t) { var e = t + 1, n = $("#tblreturns").find("tr").length + 1, a = n - 1, c = $("#tblreturns tr:nth-child(" + a + ")").attr("id"), s = c.split("_")[1]; $("#tblreturns tr:nth-child(" + a + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRow(" + s + ")'><i class='fa fa-trash'></i></button>"); var i = ""; i = i + "<tr id='trr_" + e + "'><td id='tdReturnAccount_" + e + "'><select style='width:200px' id='cmbReturnAccounts_" + e + "' onchange='AccountChange(this)' class='mustprovide' ></select><b id='cmbReturnAccountsdata_" + e + "'></b></td><td ><input type='text'  id='Receipt_" + e + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucher_" + e + "'/></td><td><input type='text' id='txtdesc_" + e + "'/></td><td class='notmonthly'><input type=text id='txtrepno_" + e + "'/></td><td class='notmonthly'><input type=text id='txtrepdt_" + e + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chk_" + e + "' /> Monthly Payment Tax</td>"; i = i + "<td id='tdmode_" + e + "'><select style='width:100px' id='cmbtrans_" + e + "' onchange='Getrelatedcheques(this)' ></select></td>", i = $("#rdPayments").is(":checked") ? i + "<td id='tdchkno_" + e + "' ><select style='width:100px' id='ddlchkno_" + e + "'></select></td>" : i + "<td id='tdchkno_" + e + "'><input type='text'  id='txtchkno_" + e + "'  /></td>", i = i + "<td id='tdchkdt_" + e + "'><input type='text' style='width:100px' id='txtchkdt_" + e + "'/></td><td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + e + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturns tr").last().after(i), $("#txtrepdt_" + e).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdt_" + e).datepicker("getDate")); $("#txtrepdt_" + e).datepicker("setDate", a) } }), $("#txtchkdt_" + e).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccounts_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccounts_" + e).select2(), $("#cmbReturnAccounts_" + e).focus() } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (t) { $.each(t, function () { $("#cmbtrans_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbtrans_" + e).select2() } }); var d = $("#tblreturns tr").length; 1 != d && (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + d + ")'><i class='fa fa-plus'></i></button><button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRow(" + d + ")'><i class='fa fa-trash'></i></button>", $("#tblreturns tr:last").find("td:last").html(str)) } function AddingreturnRowcash(t) { var e = t + 1, n = $("#tblreturnscash").find("tr").length + 1, a = n - 1, c = $("#tblreturnscash tr:nth-child(" + a + ")").attr("id"), s = c.split("_")[1]; $("#tblreturnscash tr:nth-child(" + a + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRowcash(" + s + ")'><i class='fa fa-trash'></i></button>"); var i = ""; i = i + "<tr id='trrc_" + e + "'><td id='tdReturnAccountc_" + e + "'><select style='width:200px' id='cmbReturnAccountsc_" + e + "' onchange='AccountChange(this)' class='mustprovide' ></select> <b id='cmbReturnAccountscdata_" + e + "'></b></td><td ><input type='text'  id='Receiptc_" + e + "' onkeypress='return isNumberStudentMarksKey(event)'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucherc_" + e + "'/></td><td><input type='text' id='txtdescc_" + e + "'/></td><td class='notmonthly'><input type=text id='txtrepnoc_" + e + "'/></td><td class='notmonthly'><input type=text id='txtrepdtc_" + e + "'/></td><td class='monthly' hidden='hidden'><input type='checkbox' id='chkc_" + e + "' /> Monthly Payment Tax</td>", i = i + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + e + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tblreturnscash tr").last().after(i), $("#txtrepdtc_" + e).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtc_" + e).datepicker("getDate")); $("#txtrepdtc_" + e).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccountsc_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbReturnAccountsc_" + e).select2(), $("#cmbReturnAccountsc_" + e).focus(); var d = $("#tblreturnscash tr").length; 1 != d && (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + d + ")'><i class='fa fa-plus'></i></button><button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRowcash(" + d + ")'><i class='fa fa-trash'></i></button>", $("#tblreturnscash tr:last").find("td:last").html(str)) } function DeleteReturnRow(t) { $("#trr_" + t).remove(); var e = $("#tblreturns tr").length; 1 != e ? (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + e + ")'><i class='fa fa-plus'></i></button><button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRow(" + e + ")'><i class='fa fa-trash'></i></button>", $("#tblreturns tr:last").find("td:last").html(str)) : (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRow(" + e + ")'><i class='fa fa-plus'></i></button>", $("#tblreturns tr:last").find("td:last").html(str)) } function DeleteReturnRowcash(t) { $("#trrc_" + t).remove(); var e = $("#tblreturnscash tr").length; 1 != e ? (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + e + ")'><i class='fa fa-plus'></i></button><button class='btn btn-danger btn-xs' type='button' onclick='DeleteReturnRowcash(" + e + ")'><i class='fa fa-trash'></i></button>", $("#tblreturnscash tr:last").find("td:last").html(str)) : (str = "<button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + e + ")'><i class='fa fa-plus'></i></button>", $("#tblreturnscash tr:last").find("td:last").html(str)) } function isNumberStudentMarksKey(t) { var e = t || window.event, n = e.keyCode || e.which; n = String.fromCharCode(n); var a = /[0-9]|\./; a.test(n) || (e.returnValue = !1, e.preventDefault && e.preventDefault()) } function searchTable(t) { var e = $("#tblProductGrid"); e.find("tr").each(function (e, n) { var a = $(n).find("td[class != 'hide']"); if (a.length > 0) { var c = !1; a.each(function (e, n) { var a = new RegExp(t, "i"); return a.test($(n).text()) ? (c = !0, !1) : void 0 }), 1 == c ? $(n).show() : $(n).hide() } }) } function searchTable2(t) { var e = $("#tblIwardGrid"); e.find("tr").each(function (e, n) { var a = $(n).find("td"); if (a.length > 0) { var c = !1; a.each(function (e, n) { var a = new RegExp(t, "i"); return a.test($(n).text()) ? (c = !0, !1) : void 0 }), 1 == c ? $(n).show() : $(n).hide() } }) } function searchTable3(t) { var e = $("#tblProductGrid2"); e.find("tr").each(function (e, n) { var a = $(n).find("td"); if (a.length > 0) { var c = !1; a.each(function (e, n) { var a = new RegExp(t, "i"); return a.test($(n).text()) ? (c = !0, !1) : void 0 }), 1 == c ? $(n).show() : $(n).hide() } }) } function cancelform() { document.location.reload() } function AddOutstandingRowbank(t) { var e = t + 1, n = $("#tbloutstanding").find("tr").length + 1, a = n - 1, c = $("#tbloutstanding tr:nth-child(" + a + ")").attr("id"), s = c.split("_")[1]; $("#tbloutstanding tr:nth-child(" + a + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteoutstandingRowbank(" + s + ")'><i class='fa fa-trash'></i></button>"); var i = ""; i = i + "<tr id='trrob_" + e + "'><td id='tdReturnAccountob_" + e + "'><select style='width:200px' id='cmbReturnAccountsob_" + e + "'  ></select></td><td ><input type='text' style='width:160px'  id='Receiptob_" + e + "' onkeypress='return isNumberStudentMarksKey(event)'  value='' /></td><td><input type=text id='txtvoucherob_" + e + "'/></td><td><input type=text id='txtdescob_" + e + "' style='width:160px'/></td><td><input type=text id='txtrepnoob_" + e + "'/></td><td><input type=text id='txtrepdtob_" + e + "'/></td><td><select id='cmbBankob_" + e + "' style='width:160px' onchange='Getrelatedcheques(this)'><option value=''>Select</option></select></td>", i = $("#rdPayments").is(":checked") ? i + "<td id='tdchkno_" + e + "' ><select style='width:100px' id='ddlchknoob_" + e + "'></select></td>" : i + "<td id='tdchkno_" + e + "'><input type='text'  id='txtchequeob_" + e + "'  /></td>", i = i + "<td><input type=text id='txtchequedtob_" + e + "'/></td><td><label id='txtpsob_" + e + "'>-</label></td><td><label id='lblbillnoob_" + e + "'>-</label></td><td><label id='lblioidob_" + e + "'>0</label></td><td class='hide' id='lblamtb_" + e + "'>0</td>", i = i + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddOutstandingRowbank(" + e + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tbloutstanding tr").last().after(i), $("#txtchequedtob_" + e).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $("#txtrepdtob_" + e).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtob_" + e).datepicker("getDate")); $("#txtrepdtob_" + e).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccountsob_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccountsob_" + e).select2() } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (t) { $.each(t, function () { $("#cmbBankob_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbBankob_" + e).select2(), $("#cmbBankob_" + e).focus() } }) } function DeleteoutstandingRowbank(t) { $("#trrob_" + t).remove() } function DeleteOutstandingRowcash(t) { $("#trroc_" + t).remove() } function DeleteInwardBank(t) { $("#trrIB_" + t).remove() } function DeleteInwardCash(t) { $("#trrIC_" + t).remove() } function AddoutstandingRowcash(t) {
    var e = t + 1, n = $("#tbloutstandingcash").find("tr").length + 1, a = n - 1, c = $("#tbloutstandingcash tr:nth-child(" + a + ")").attr("id"), s = c.split("_")[1]; $("#tbloutstandingcash tr:nth-child(" + a + ")").find("td:last").html("<button class='btn btn-danger btn-xs' type='button' onclick='DeleteOutstandingRowcash(" + s + ")'><i class='fa fa-trash'></i></button>"); var i = ""; i = i + "<tr id='trroc_" + e + "'><td id='tdReturnAccountoc_" + e + "'><select style='width:200px' id='cmbReturnAccountsoc_" + e + "'  ></select></td><td ><input type='text'  id='Receiptoc_" + e + "' onkeypress='return isNumberStudentMarksKey(event)' style='width:160px' /></td><td><input type=text id='txtvoucheroc_" + e + "'/></td><td><input type=text id='txtdescoc_" + e + "'/></td><td><input type=text id='txtrepnooc_" + e + "'/></td><td><input type=text id='txtrepdtoc_" + e + "'/></td><td><label id='txtpsoc_" + e + "'>-</label></td><td><label id='lblbillnooc_" + e + "'>-</label></td><td><label id='lblioidoc_" + e + "'>0</label></td><td class='hide' id='lblamtc_" + e + "'>0</td>", i = i + "<td><button class='btn btn-info btn-xs'  type='button'  onclick='AddoutstandingRowcash(" + e + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#tbloutstandingcash tr").last().after(i), $("#txtrepdtoc_" + e).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtoc_" + e).datepicker("getDate")); $("#txtrepdtoc_" + e).datepicker("setDate", a) } }), $.ajax({
        type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) {
            $.each(t, function () {
                $("#cmbReturnAccountsoc_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>");
            }), $("#cmbReturnAccountsoc_" + e).select2(), $("#cmbReturnAccountsoc_" + e).focus()
        }
    })
} function Getrelatedcheques(t) { if ($("#rdPayments").is(":checked")) { var e = $(t).attr("id"), n = e.split("_")[0], a = e.split("_")[1], c = ""; "cmbtrans" == n ? c = "ddlchkno_" + a : "cmbtransIB" == n ? c = "ddlchknoIB_" + a : "cmbBankob" == n && (c = "ddlchknoob_" + a); var s = $("#" + e).val(); $("#" + c).empty(), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCheques", data: { id: s }, success: function (t) { $.each(t, function () { $("#" + c).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#" + c).select2() } } function fetchInward(t) { $(".blockUI").show(), $(".blockUI blockOverlay").show(), $(".blockUI blockMsg blockElement").show(); var e = $("#Itr_" + t).find(":nth-child(2)").html(), n = $("#Itr_" + t).find(":nth-child(3)").html(), a = $("#Itr_" + t).find(":nth-child(5)").html(); $("#inwarddetails").show(), $("#lblps").html("<b class='vd_blue'>Purchase/Sales Type :</b> " + e), $("#lblbillno").html("<b class='vd_green'>Bill NO : </b>" + n), $("#lblcustomer").html("<b class='vd_red'>Customer Name : </b>" + a), $("#hdnio").val(t), $("#rdcash").is(":checked") ? ($("#Inwardcash").show(), $("#extrareturnscash").hide(), $("#extrareturns").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#Inwardbank").hide(), $("#submitbuttons").html("<button class='btn btn-info' type='button'  onclick='btnInwardcash()'>Submit</button>"), AddInwardCash(), $(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide()) : $("#rdbank").is(":checked") && ($("#Inwardcash").hide(), $("#extrareturnscash").hide(), $("#extrareturns").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#Inwardbank").show(), $("#submitbuttons").html("<button class='btn btn-info' onclick='btnInwardbank()'>Submit</button>"), AddInwardBank(), $(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide()), $("#closeInwardpopup").trigger("click") } function btnInwardcash() { var t = $("#hdnio").val(), e = ""; $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomerId", data: { io: t }, success: function (n) { e = n, $("#no1").trigger("click"); var a = []; $("#tblInwardcash").find("tr").each(function () { if ("0" != $("#cmbReturnAccountsIC_" + d).val()) { var n = "", c = "", s = 0, i = 0, d = $(this).attr("id").split("_")[1], r = $(this).attr("id").split("_")[0], o = 0; if ("trrIC" == r) o = 0; else { var l = Number($(this).attr("id").split("_")[0].replace("t", "")); o = l } var u = $("#cmbReturnAccountsIC_" + d).val(), h = Number($("#AddIC_" + d).val()), p = Number($("#LessIC_" + d).val()), b = $("#txtVoucherIC_" + d).val(), m = $("#txtrepnoIC_" + d).val(), f = $("#txtrepdtIC_" + d).val(), v = ($("#chkIC_" + d).is(":checked"), !0), y = ""; y = $("#txtdetailsIC_" + d).val(); var g = $("#txtreturndt").val(); $("#rdReceipts").is(":checked") ? null == h || "" == h ? (s = p, i = 2, c = u, n = e) : (null == p || "" == p) && (s = h, i = 2, n = u, c = e) : $("#rdPayments").is(":checked") && (null == h || "" == h ? (s = p, i = 1, c = e, n = u) : (null == p || "" == p) && (s = h, i = 1, n = e, c = u)); var k = { Amount: s, CrAccount: n, DrAccount: c, VoucherSystemId: b, JournalId: o, JournalDate: g, Details: y, TransactionType: i, IOMasterId: t, ReportNo: m, ReportDate: f, BilPending: v }; a.push(k) } }); var c = { JournalDetails: a, IOMasterId: t }; $.ajax({ url: "../ReceiptsandPayments/SaveOutstandings", data: JSON.stringify(c), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { "ok" == t.message && (notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tblInwardcash").html(""), AddInwardCash(), $("#cancelAdjustments").trigger("click")) }, error: function (t) { notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in submitting form") } }) } }) } function btnconfirmcash() { var t = 0, e = 0; $("input.mustprovide").each(function () { 0 != $(this).val() && "" != $(this).val() || 1 != $("#rdcash").is(":checked") && 1 != $("#rdContra").is(":checked") || (t += 1) }), $("select.mustprovide").each(function () { 0 != $(this).val() || 1 != $("#rdcash").is(":checked") && 1 != $("#rdContra").is(":checked") || (e += 1) }), e > 0 ? required("Select Account") : t > 0 ? required("Invalid Amount") : ($("#no2").trigger("click"), $("#hdnButton").val("btnconfirmcash"), $("#submitbuttons").find("button").attr("disabled", !0), $("#confirmGeneral").modal("show")) } function btnconfirm() { var t = 0, e = 0; $("input.mustprovide").each(function () { 0 != $(this).val() && "" != $(this).val() || 1 != $("#rdbank").is(":checked") || (t += 1) }), $("select.mustprovide").each(function () { 0 == $(this).val() && 1 == $("#rdbank").is(":checked") && (e += 1) }), e > 0 ? required("Select Account") : t > 0 ? required("Invalid Amount") : ($("#hdnButton").val("btnconfirm"), $("#submitbuttons").find("button").attr("disabled", !0), $("#confirmGeneral").modal("show")) } function btnconfirmOutBank() { $("#hdnButton").val("btnconfirmOutBank"), $("#submitbuttons").find("button").attr("disabled", !0), $("#confirmGeneral").modal("show") } function popupoutstanding() { var t = [], e = 0; $("#noout").trigger("click"), $("#tbloutstandingcash").find("tr").each(function () { if (0 != $("#cmbReturnAccountsoc_" + s).val()) { var n = "", a = "", c = 0, s = $(this).attr("id").split("_")[1], i = $("#cmbReturnAccountsoc_" + s).val(), d = Number($("#Receiptoc_" + s).val()), r = ($("#lblbillnooc_" + s).text(), Number($("#lblioidoc_" + s).text())), o = $("#txtrepnooc_" + s).val(), l = $("#txtrepdtoc_" + s).val(), u = $("#chkoc_" + s).is(":checked"); Number($("#lblamtc_" + s).text()); $("#rdReceipts").is(":checked") ? (c = 2, n = i, $("#rdcash").is(":checked") ? a = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = 4)) : $("#rdPayments").is(":checked") ? (c = 1, a = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = 4)) : $("#rdContra").is(":checked") && (c = 3, n = $("#craccount").val(), a = i); var h = $("#txtvoucheroc_" + s).val(); "" == h && e++; var p = String($("#txtdescoc_" + s).val()), b = $("#txtreturndt").val(), m = { Amount: d, CrAccount: n, DrAccount: a, VoucherSystemId: h, JournalDate: b, Details: p, IOMasterId: r, ReportNo: o, RepartDate: l, Monthlytaxpurchase: u, TransactionType: c }; t.push(m) } }); var n = { JournalDetails: t }; $.ajax({ url: "../ReceiptsandPayments/SaveOutstandings", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tbloutstandingcash").html(""), $("#extraoutstabdingcash").hide(), $("#extrareturnscash").show(), $("#tblreturnscash").html(""), PSReturnsCash(), $("#unbind").html(""), $("#hdnUnbilledPannel").hide(), $("#unbind2").html(""), $("#hdnUnbilledPannel2").hide(), $("#unbind").hide(), $("#unbind2").hide(), $("#submitbuttons").html("<button class='btn btn-info' onclick='btnconfirmcash()'>Submit</button>"); var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), setTimeout(SendingSMS(t.jid, e, n, a), 1e3) }, error: function (t) { fail() } }) } function SendingSMS(t, e, n, a) { $.ajax({ type: "get", url: "../stiReport/SendingMailRP", data: { jid: t, ps: e, sms: n, mail: a }, success: function (t) { $("#ckhsms").attr("checked", !1), $("#ckhmail").attr("checked", !1), $("#ckhshowreport").attr("checked", !1) } }) } function btnconfirmOutCash() { $("#hdnButton").val("btnconfirmOutCash"), $("#submitbuttons").find("button").attr("disabled", !0), $("#confirmGeneral").modal("show") } function btnInwardbank() { $("#no6").trigger("click"); var t = $("#hdnio").val(), e = []; $("#tblInwardbank").find("tr").each(function () { if ("0" != $("#cmbReturnAccountsIB_" + i).val()) { var n = "", a = "", c = 0, s = 0, i = $(this).attr("id").split("_")[1], d = $("#cmbReturnAccountsIB_" + i).val(), r = Number($("#AddIB_" + i).val()), o = Number($("#LessIB_" + i).val()), l = $("#txtVoucherIB_" + i).val(), u = $("#cmbtransIB_" + i).val(), h = $("#txtrepnoIB_" + i).val(), p = $("#txtrepdtIB_" + i).val(), b = $("#chkIB_" + i).is(":checked"), m = ""; $("#rdPayments").is(":checked") ? "Select Cheque" != $("#ddlchkno_" + i + " :selected").text() && (m = $("#ddlchknoIB_" + i + " :selected").text() + "~d") : m = $("#txtchknoIB_" + i).val(); var f = $("#txtchkdtIB_" + i).val(), v = $("#PercentIB_" + i).val(), y = $("#txtreturndt").val(); null == r || "" == r ? (c = o, s = 1, a = d, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = 4)) : (null == o || "" == o) && (c = r, s = 2, n = d, $("#rdcash").is(":checked") ? a = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = 4)); var g = { Amount: c, CrAccount: n, DrAccount: a, VoucherSystemId: l, JournalDate: y, Details: v, Bank: u, TransactionType: s, ChequeNo: m, ChequeDate: f, IOMasterId: t, ReportNo: h, RepartDate: p, Monthlytaxpurchase: b }; e.push(g) } }); var n = { JournalDetails: e, IOMasterId: t }; $.ajax({ url: "../ReceiptsPaymentsContra/Save", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { if ("ok" == t.message) { OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tblInwardbank").html(""), Inwardbank(), notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"); var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), $.ajax({ type: "get", url: "../stiReport/SendingMailRP", data: { jid: t.jid, ps: e, sms: n, mail: a }, success: function (t) { $("#ckhsms").attr("checked", !1), $("#ckhmail").attr("checked", !1), $("#ckhshowreport").attr("checked", !1) } }) } }, error: function (t) { notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in submitting form") } }) } function Deleteps(t) { $.ajax({ type: "POST", url: "../ReceiptsPaymentsContra/IsFromOutstanding", data: { id: t }, success: function (e) { "dependent" == e && ($("#confirmmsg").html("Record has dependent transactions,Do you still want to delete this record..?"), $("#confirm").modal("show"), $("#deletingid").val(t)), "cash" == e ? ($("#confirmmsg").html("Cash transactions cannot be deleted,Do you still want to delete this record..?"), $("#confirm").modal("show"), $("#deletingid").val(t)) : ($("#confirmmsg").html("Are you sure to delete this record..?"), $("#confirm").modal("show"), $("#deletingid").val(t)) } }) } function Getps(t) { var e = $("#tr_" + t).find("td:nth-child(2)").text(), n = $("#tr_" + t).find("td:nth-child(2)").attr("id").split("_")[1], a = $("#tr_" + t).find("td:nth-child(3)").text(), c = $("#tr_" + t).find("td:nth-child(3)").attr("id").split("_")[1], s = $("#tr_" + t).find("td:nth-child(4)").text(), i = $("#tr_" + t).find("td:nth-child(5)").text(), d = $("#tr_" + t).find("td:nth-child(6)").text(), r = $("#tr_" + t).find("td:nth-child(9)").text(); $("#tr_" + t).find("td:nth-child(3)").html("<input type='text' onfocus='this.select()' class='typeahead' value='" + a + "' id='ddl_" + c + "'  autocomplete='off' data-provide='typeahead'/><input type='hidden' id='hdnddl_" + c + "' />"), $("#tr_" + t).find("td:nth-child(2)").html("<input type='text' onfocus='this.select()' class='typeahead' value='" + e + "' id='ddl_" + n + "'  autocomplete='off' data-provide='typeahead'/><input type='hidden' id='hdnddl_" + n + "' />"), $("#tr_" + t).find("td:nth-child(4)").html("<input type='text' onfocus='this.select()' value='" + s + "'>"), $("#tr_" + t).find("td:nth-child(5)").html("<input type='text' onfocus='this.select()' value='" + i + "'>"), $("#tr_" + t).find("td:nth-child(6)").html("<input type='text' onfocus='this.select()' class='date' onfocus='this.select()' value='" + d + "'>"), $("#tr_" + t).find("td:nth-child(9)").html("<input type='text' onfocus='this.select()' value='" + r + "'>"), $("#btnhdnGet_" + t).addClass("hide"), $("#btnhdnEdit_" + t).removeClass("hide"); var o = {}, l = []; $("#ddl_" + n).typeahead({ source: function (t, e) { $.ajax({ url: "../Purchase_Sales/GetSubAccount", cache: !1, success: function (t) { o = {}, l = [], _.each(t, function (t, e, n) { l.push(t.Text), o[t.Text] = t.Value }), e(l) } }) }, updater: function (t) { return $("#hdnddl_" + n).val(o[t]), t } }); var u = {}, h = []; $("#ddl_" + c).typeahead({ source: function (t, e) { $.ajax({ url: "../Purchase_Sales/GetSubAccount", cache: !1, success: function (t) { u = {}, h = [], _.each(t, function (t, e, n) { h.push(t.Text), u[t.Text] = t.Value }), e(h) } }) }, updater: function (t) { return $("#hdnddl_" + c).val(o[t]), t } }) } function Refreshps(t) { var e = $("#tr_" + t).find("td:nth-child(2) input[type='text'] ").val(), n = $("#tr_" + t).find("td:nth-child(3) input[type='text']").val(), a = $("#tr_" + t).find("td:nth-child(4)  input[type='text']").val(), c = $("#tr_" + t).find("td:nth-child(5)  input[type='text']").val(), s = $("#tr_" + t).find("td:nth-child(6)  input[type='text']").val(), i = $("#tr_" + t).find("td:nth-child(9)  input[type='text']").val(); $("#tr_" + t).find("td:nth-child(2)").text(e), $("#tr_" + t).find("td:nth-child(3)").text(n), $("#tr_" + t).find("td:nth-child(4)").text(a), $("#tr_" + t).find("td:nth-child(5)").text(c), $("#tr_" + t).find("td:nth-child(6)").text(s), $("#tr_" + t).find("td:nth-child(9)").text(i), $("#btnhdnGet_" + t).removeClass("hide"), $("#btnhdnEdit_" + t).addClass("hide") } function Editps(t) { var e = $("#tr_" + t).find("td:nth-child(2) input[type='text']").val(), n = $("#tr_" + t).find("td:nth-child(3) input[type='text']").val(), a = $("#tr_" + t).find("td:nth-child(4)  input[type='text']").val(), c = $("#tr_" + t).find("td:nth-child(5)  input[type='text']").val(), s = $("#tr_" + t).find("td:nth-child(6)  input[type='text']").val(), i = $("#tr_" + t).find("td:nth-child(9)  input[type='text']").val(), d = e + "^" + n + "^" + a + "^" + c + "^" + s + "^" + i + "^" + t; $.ajax({ type: "POST", url: "../ReceiptsandPayments/EditJournal", data: { id: d }, success: function (a) { "success" == a ? ($("#psspinner2").hide(), notification("topright", "info", "fa fa-info-circle vd_blue", "Info Notification", "Record updated Successfully"), $("#tr_" + t).find("td:nth-child(2) select").attr("id", "ddl_" + e), $("#tr_" + t).find("td:nth-child(3) select").attr("id", "ddl_" + n), Refreshps(t)) : "fail" == a ? ($("#psspinner2").hide(), notification("topright", "info", "fa fa-times vd_red", "Error", "Error in Record updation")) : "cr" == a ? ($("#psspinner2").hide(), notification("topright", "notify", "fa fa-times vd_red", "Invalid Account", "Credit Account does not exists")) : "dr" == a && ($("#psspinner2").hide(), notification("topright", "notify", "fa fa-times vd_red", "Invalid Account", "Debit Account does not exists")) } }) } function Deletepsadj(t) { $.ajax({ type: "POST", url: "../ReceiptsandPayments/DeleteAdjustment", data: { id: t }, success: function (e) { "success" == e ? (deleted(), $("#tradj_" + t).remove()) : "fail" == e && fail() } }) } function Getpsadj(t) { var e = ($("#tradj_" + t).find("td:nth-child(2)").text(), $("#tradj_" + t).find("td:nth-child(3)").text(), $("#tradj_" + t).find("td:nth-child(4)").text()), n = $("#tradj_" + t).find("td:nth-child(5)").text(); $("#tradj_" + t).find("td:nth-child(4)").html("<input type='text' onfocus='this.select()' value='" + e + "'>"), $("#tradj_" + t).find("td:nth-child(5)").html("<input type='text' onfocus='this.select()' value='" + n + "'>"), $("#btnhdnGetadj_" + t).addClass("hide"), $("#btnhdnEditadj_" + t).removeClass("hide") } function Refreshpsadj(t) { var e = $("#tradj_" + t).find("td:nth-child(4)  input[type='text']").val(), n = $("#tradj_" + t).find("td:nth-child(5)  input[type='text']").val(); $("#tradj_" + t).find("td:nth-child(4)").text(e), $("#tradj_" + t).find("td:nth-child(5)").text(n), $("#btnhdnGetadj_" + t).removeClass("hide"), $("#btnhdnEditadj_" + t).addClass("hide") } function Editpsadj(t) { var e = $("#tradj_" + t).find("td:nth-child(4)  input[type='text']").val(), n = $("#tradj_" + t).find("td:nth-child(5)  input[type='text']").val(), a = e + "^" + n + "^" + t; $.ajax({ type: "POST", url: "../ReceiptsandPayments/EditAdjustment", data: { id: a }, success: function (e) { "success" == e ? ($("#psspinneradj").hide(), notification("topright", "info", "fa fa-info-circle vd_blue", "Info Notification", "Record updated Successfully"), Refreshpsadj(t)) : "fail" == e ? ($("#psspinner2").hide(), notification("topright", "info", "fa fa-times vd_red", "Error", "Error in Record updation")) : "cr" == e ? ($("#psspinner2").hide(), notification("topright", "notify", "fa fa-times vd_red", "Invalid Account", "Credit Account does not exists")) : "dr" == e && ($("#psspinner2").hide(), notification("topright", "notify", "fa fa-times vd_red", "Invalid Account", "Debit Account does not exists")) } }) } function productgrid() { $("#psspinner2").show(); var t = 0; $("#rdReceipts").is(":checked") ? t = 2 : $("#rdPayments").is(":checked") ? t = 1 : $("#rdContra").is(":checked") && (t = 3); var e = $("#txtreturndt").val(); $("#psspinner2").show(), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: t, dt: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide() } }) } function ClickContra(t) { var e = $(t).attr("id"); "Contracr" == e && ($("#Contracr").removeClass("btn btn-xs btn-success"), $("#Contracr").text("Debitor Account"), $("#Contracr").addClass("btn btn-xs btn-danger"), $("#Contracr").attr("id", "Contradr"), $("#hdncontra").val("Contradr")), "Contradr" == e && ($("#Contradr").removeClass("btn btn-xs btn-danger"), $("#Contradr").text("Creditor Account"), $("#Contradr").addClass("btn btn-xs btn-success"), $("#Contradr").attr("id", "Contracr"), $("#hdncontra").val("Contracr")) } function GetAccountCrDr() { var t = $("#hdnAdjustmentId").val(); $.ajax({ type: "get", url: "../ReceiptsandPayments/GetAdjustmentCRDR", data: { accountid: t }, success: function (t) { var e = t.split("~")[0], n = t.split("~")[1]; $("#amountinfo").html(e), $("#hdnType").val(n) } }); var e = 0; $("#rdReceipts").is(":checked") ? e = 2 : $("#rdPayments").is(":checked") && (e = 1), "0" == $("#toggleAdjustment").val() ? $.ajax({ type: "get", url: "../ReceiptsandPayments/BillLists", data: { mode: e, accountid: t }, success: function (t) { var e = t.split("~")[0], n = t.split("~")[1]; $("#unbillpara").html(n), $("#chkbills").html(e) } }) : $.ajax({ type: "get", url: "../ReceiptsandPayments/BillListsAddless", data: { mode: e, accountid: t }, success: function (t) { $("#chkbills").html(t) } }) } function btnGetIOBills2() { var t = $("#txtamountAdjustments2").val(), e = ""; "" == t && notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Provide Amount"), $("#chkbills2").find("input[type='checkbox']").each(function () { var t = $(this).attr("id"); $("#" + t).is(":checked") && (e = e + $(this).val() + ",") }), "" == e ? notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Check Bills") : "" == t ? notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Provide Amount") : $.ajax({ type: "get", url: "../ReceiptsandPayments/GetBillsTable2", data: { billlists: e, amount: t }, success: function (e) { $("#tbodybills2").html(e); var n = 0; $("#tbodybills2").find("tr input[type='text']").each(function (t, e) { n += Number($(e).val()) }); var a = Math.round(Number(t) - n, 2); 0 > a ? ($("#remainingbal2").html(" <h3  style='font-size:14px;font-weight:bold' class='vd_red'>Balance Amount :0 Rs.</h3>"), $("#PBalanceAdjustments").val(0)) : ($("#remainingbal2").html(" <h3  style='font-size:14px;font-weight:bold' class='vd_green'>Balance Amount :" + a + " Rs.</h3>"), $("#PBalanceAdjustments").val(a)) } }) } function btnGetIOBills() { var t = "", e = $("#hdnAdjustmentId").val(), n = 0, a = ($("#hdnType").val(), Number($("#unbillpara").text())); if (n = a, "0" == $("#toggleAdjustment").val()) $("#chkbills").find("input[type='checkbox']").each(function () { var e = $(this).attr("id"); $("#" + e).is(":checked") && (t = t + e + ",") }), t = t.slice(0, -1), "" == t ? notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Check Bills") : "" == n ? notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Provide Amount") : $.ajax({ type: "get", url: "../ReceiptsandPayments/GetBillsTable", data: { accountid: e, billlists: t, amount: n }, success: function (t) { $("#tbodybills").html(t); var e = 0; $("#tbodybills").find("tr input[type='text']").each(function (t, n) { e += Number($(n).val()) }); var a = Math.round(Number(n) - e, 2); 0 > a ? ($("#remainingbal").html(" <h3  style='font-size:14px;font-weight:bold' class='vd_red'>Balance Amount :0 Rs.</h3>"), $("#RBalanceAdjustments").val(0)) : ($("#remainingbal").html(" <h3  style='font-size:14px;font-weight:bold' class='vd_green'>Balance Amount :" + a + " Rs.</h3>"), $("#RBalanceAdjustments").val(a)) } }); else { var c = 0, s = ""; if ($("#chkbills").find("input[type='checkbox']").each(function () { var t = $(this).attr("id"); $("#" + t).is(":checked") && (c += 1) }), c > 1) notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Select only one bill"); else { var i = 0; $("#chkbills").find("input[type='checkbox']").each(function () { var t = $(this).attr("id"); $("#" + t).is(":checked") && (i = t, s = s + t + ",") }), "" == s ? notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Check Bills") : $.ajax({ type: "get", url: "../ReceiptsandPayments/GetAddLessData", data: { io: i }, success: function (t) { var e = t.split("!")[0].split("~")[0], n = t.split("!")[0].split("~")[1], a = t.split("!")[0].split("~")[2], c = t.split("!")[1]; $("#lblps").html("<b class='vd_blue'>Purchase/Sales Type :</b> " + e), $("#lblbillno").html("<b class='vd_green'>Bill NO : </b>" + n), $("#lblcustomer").html("<b class='vd_red'>Customer Name : </b>" + a), $("#hdnio").val(i), $("#Inwardcash").show(), "" != c ? ($("#tblInwardcash").html(c), $("#tblInwardcash").find("tr").each(function () { var t = $(this).attr("id").split("_")[1]; $("#txtrepdtIC_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtIC_" + t).datepicker("getDate")); $("#txtrepdtIC_" + t).datepicker("setDate", a) } }) })) : AddInwardCash() } }) } } } function isNumberKey(t) { var e = t || window.event, n = e.keyCode || e.which; n = String.fromCharCode(n); var a = /[0-9]|\./; a.test(n) || (e.returnValue = !1, e.preventDefault && e.preventDefault()) } function Validateinput(t) { var e = $("#lblb_" + t).text(), n = 0; n = e.indexOf("(") > 0 ? Number(e.split("(")[0]) : Number(e); var a = Number($("#txtb_" + t).val()); Number($("#txtamountAdjustments").val()); a > n && (notification("topright", "notify", "fa fa-exclamation-triangle vd_yellow", "Warning", "Given amount is greater then Bill amount"), $("#txtb_" + t).val(n)) } function SaveAdjustments2() { var t = [], e = "", n = "", a = 0, c = 0, s = ($("#hdnType").val(), $("#ViewBagCash").val(), $("#cmbBankAdjustments2").val()), i = "", d = ""; $("#rdbankAdjustments2").is(":checked") && (i = $("#chequeNo").val(), d = $("#ChequeDate").val()); var r = $("#txtreturndt").val(); a = $("#txtamountAdjustments2").val(), c = 1, n = -1, $("#rdcashAdjustments2").is(":checked") ? e = $("#ViewBagCash").val() : $("#rdbankAdjustments2").is(":checked") && (e = s); var o = ""; $("#tbodybills2").find("tr").each(function () { var t = $(this).attr("id").split("_")[1], e = $("#txtb_" + t).val(); o = o + t + "," + e + "!" }); var l = { Amount: a, CrAccount: e, DrAccount: n, JournalDate: r, Bank: s, TransactionType: c, ChequeNo: i, ChequeDate: d }; t.push(l); var u = { BillAmounts: o }; $.ajax({ url: "../ReceiptsPaymentsContra/SaveBill2", data: JSON.stringify(u), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { "ok" == t.message && (OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tbodybills2").html(""), $("#cmbAdjustments2").val(""), $("#amountinfo2").html(""), $("#chkbills2").html(""), $("#txtamountAdjustments2").val(""), $("#remainingbal2").html(""), $("#cmbBankAdjustments2").val(""), $("#chequeNo2").val(""), $("#ChequeDate2").val($("#ViewCurrentDate").val()), $("#rdcashAdjustments2").attr("checked", !0), canceladjustments(), $("#cancelAdjustments2").trigger("click"), $("#ckhAdjustments").attr("checked", !0), notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully")) }, error: function (t) { notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in submitting form") } }) } function SaveAdjustments() { if ("0" == $("#toggleAdjustment").val()) { var t = ""; $("#tbodybills").find("tr").each(function () { var e = $(this).attr("id").split("_")[1], n = Number($("#txtb_" + e).val()), a = $("#remarkb_" + e).val(); t = t + e + "," + n + "," + a + "!" }); var e = { BillAmounts: t }; $.ajax({ url: "../ReceiptsPaymentsContra/SaveBill", data: JSON.stringify(e), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { "ok" == t.message && (OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tbodybills").html(""), $("#cmbAdjustments").val(""), $("#amountinfo").html(""), $("#chkbills").html(""), $("#txtamountAdjustments").val(""), $("#remainingbal").html(""), $("#cmbBankAdjustments").val(""), $("#chequeNo").val(""), $("#ChequeDate").val($("#ViewCurrentDate").val()), $("#rdcashAdjustments").attr("checked", !0), canceladjustments(), $("#cancelAdjustments").trigger("click"), $("#ckhAdjustments").attr("checked", !0), notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), $("#cancelAdjustments").trigger("click")) }, error: function (t) { notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in submitting form") } }) } else btnInwardcash() } function btnUncheck() { $("#chkbills").find("input[type='checkbox']").each(function () { $(this).attr("checked", !1) }) } function btnUncheck2() { $("#chkbills2").find("input[type='checkbox']").each(function () { $(this).attr("checked", !1) }) } function GetCustomerId(t) { $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomerId", data: { io: t }, success: function (t) { } }) } function ToggleAdjustment(t) { var e = $(t).attr("id"); "Addlessbtn" == e ? ($("#toggleAdjustment").val("1"), "" != $("#hdnAdjustmentId").val() ? ($("#divAdjust").hide(), GetAccountCrDr(), $("#divInward").show()) : ($("#divAdjust").hide(), $("#divInward").show()), $("#Adjustmentbtn").show(), $("#Addlessbtn").hide(), $("#adjtitle").text("Add Less (Excess - short)")) : ($("#toggleAdjustment").val("0"), $("#divAdjust").show(), $("#divInward").hide(), $("#Adjustmentbtn").hide(), $("#Addlessbtn").show(), $("#adjtitle").text("Adjustments")) } function canceladjustments() { $("#ckhAdjustments").prop("checked", !1), $("#cmbAdjustments").val(""), $("#txtamountAdjustments").val(""), $("#chkbills").html(""), $("#tbodybills").html(""), $("#remainingbal").html(""), $("#cmbBankAdjustments").val(""), $("#chequeNo").val(""), $("#ChequeDate").val($("#ViewCurrentDate").val()), $("#rdcashAdjustments").prop("checked", !0), $("#Adjustments").modal("hide") } function OnCustomSubmit() {
    if ($("#nogeneral").trigger("click"), "btnconfirmcash" == $("#hdnButton").val()) { var t = 0, e = []; $("#tblreturnscash").find("tr").each(function () { if (0 != $("#cmbReturnAccountsc_" + s).val()) { var n = "", a = "", c = 0, s = $(this).attr("id").split("_")[1], i = $("#cmbReturnAccountsc_" + s).val(), d = Number($("#Receiptc_" + s).val()), r = $("#txtrepnoc_" + s).val(), o = $("#txtrepdtc_" + s).val(), l = $("#chkc_" + s).is(":checked"); $("#rdReceipts").is(":checked") ? (c = 2, n = i, $("#rdcash").is(":checked") ? a = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = 4)) : $("#rdPayments").is(":checked") ? (c = 1, a = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = 4)) : $("#rdContra").is(":checked") && ("Contracr" == $("#hdncontra").val() ? (c = 3, n = $("#craccount").val(), a = i) : "Contradr" == $("#hdncontra").val() && (c = 3, a = $("#craccount").val(), n = i)); var u = $("#txtvoucherc_" + s).val(); "" == u && t++; var h = String($("#txtdescc_" + s).val()), p = $("#txtreturndt").val(), b = { Amount: d, CrAccount: n, DrAccount: a, VoucherSystemId: u, JournalDate: p, Details: h, TransactionType: c, ReportNo: r, RepartDate: o, Monthlytaxpurchase: l }; e.push(b) } }); var n = { JournalDetails: e }; $.ajax({ url: "../ReceiptsandPayments/Save", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { if ("Success" == t.data) { var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), setTimeout(SendingSMS(t.jid, e, n, a), 1e3), notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tblreturnscash").html(""), PSReturnsCash() } else "fail" == t.data && notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in Record Submission , " + t.message) }, error: function (t) { alert("Insertion failed ") } }) } else if ("btnconfirm" == $("#hdnButton").val()) { var e = [], t = 0; $("#tblreturns").find("tr").each(function () { if (0 != $("#cmbReturnAccounts_" + s).val()) { var n = "", a = "", c = 0, s = $(this).attr("id").split("_")[1], i = $("#cmbReturnAccounts_" + s).val(), d = Number($("#Receipt_" + s).val()), r = $("#cmbtrans_" + s).val(), o = $("#txtrepno_" + s).val(), l = $("#txtrepdt_" + s).val(), u = $("#chk_" + s).is(":checked"); $("#rdReceipts").is(":checked") ? (c = 2, n = i, $("#rdcash").is(":checked") ? a = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = r)) : $("#rdPayments").is(":checked") ? (c = 1, a = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = r)) : $("#rdContra").is(":checked") && (c = 3, n = $("#craccount").val(), a = i); var h = $("#txtvoucher_" + s).val(); "" == h && t++; var r = $("#cmbtrans_" + s).val(), p = ""; $("#rdPayments").is(":checked") && (p = "Select Cheque" != $("#ddlchkno_" + s + " :selected").text() ? $("#ddlchkno_" + s + " :selected").text() + "~d" : ""), $("#txtchkno_" + s).val(); var b = $("#txtchkdt_" + s).val(), m = String($("#txtdesc_" + s).val()), f = $("#txtreturndt").val(), v = { Amount: d, CrAccount: n, DrAccount: a, VoucherSystemId: h, JournalDate: f, Details: m, Bank: r, TransactionType: c, ChequeNo: p, ChequeDate: b, ReportNo: o, RepartDate: l, Monthlytaxpurchase: u }; e.push(v) } }); var n = { JournalDetails: e }; $.ajax({ url: "../ReceiptsandPayments/Save", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { if ("Success" == t.data) { notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tblreturns").html(""), PSReturns(); var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), $.ajax({ type: "get", url: "../stiReport/SendingMailRP", data: { jid: t.jid, ps: e, sms: n, mail: a }, success: function (t) { $("#ckhsms").attr("checked", !1), $("#ckhmail").attr("checked", !1), $("#ckhshowreport").attr("checked", !1) } }) } else "fail" == t.data && notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in Record Submission , " + t.message) }, error: function (t) { alert("Insertion failed ") } }) } else if ("btnconfirmOutBank" == $("#hdnButton").val()) {
        var e = [], t = 0; $("#tbloutstanding").find("tr").each(function () {
            if (0 != $("#cmbReturnAccountsob_" + s).val()) { var n = "", a = "", c = 0, s = $(this).attr("id").split("_")[1], i = $("#cmbReturnAccountsob_" + s).val(), d = Number($("#Receiptob_" + s).val()), r = $("#cmbBankob_" + s).val(), o = $("#txtrepnoob_" + s).val(), l = $("#txtrepdtob_" + s).val(), u = $("#chkob_" + s).is(":checked"), h = "", p = Number($("#lblamtb_" + s).text()), b = !0; d == p && (b = !1), $("#rdReceipts").is(":checked") ? (c = 2, n = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = r)) : $("#rdPayments").is(":checked") ? (c = 1, a = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = r), h = "Select Cheque" != $("#ddlchknoob_" + s + " :selected").text() ? $("#ddlchknoob_" + s + " :selected").text() + "~d" : $("#txtchequeob_" + s).val()) : $("#rdContra").is(":checked") && (c = 3, n = $("#craccount").val(), a = i); var m = $("#txtvoucherob_" + s).val(); "" == m && t++; var r = $("#cmbBankob_" + s).val(), f = $("#txtchequedtob_" + s).val(), v = String($("#txtdescob_" + s).val()), y = $("#txtreturndt").val(), g = $("#lblioidob_" + s).text().trim(); "-" == g && (g = "0"); var k = { Amount: d, CrAccount: n, DrAccount: a, VoucherSystemId: m, JournalDate: y, Details: v, Bank: r, TransactionType: c, ChequeNo: h, ChequeDate: f, IOMasterId: g, ReportNo: o, RepartDate: l, Monthlytaxpurchase: u }; e.push(k) }
        }); var n = { JournalDetails: e }; $.ajax({ url: "../ReceiptsandPayments/SaveOutstandings", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { if ("Success" == t.data) { notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3), $("#tbloutstanding").html(""), $("#extraoutstabding").hide(), $("#extrareturnscash").show(), $("#rdCash").prop("checked", !0), $("#tblreturnscash").html(""), PSReturnsCash(), $("#unbind").html(""), $("#hdnUnbilledPannel").hide(), $("#unbind2").html(""), $("#hdnUnbilledPannel2").hide(); var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), $.ajax({ type: "get", url: "../stiReport/SendingMailRP", data: { jid: t.jid, ps: e, sms: n, mail: a }, success: function (t) { $("#ckhsms").attr("checked", !1), $("#ckhmail").attr("checked", !1), $("#ckhshowreport").attr("checked", !1) } }) } else "fail" == t.data && notification("topright", "notify", "fa fa-times vd_red", "Error", "Error in Record Submission , " + t.message) }, error: function (t) { alert("Insertion failed ") } })
    } else if ("btnconfirmOutCash" == $("#hdnButton").val()) { var a = $("#unbind").text(); if ("" != a) $("#confirmOut").modal("show"); else { var e = [], t = 0; $("#tbloutstandingcash").find("tr").each(function () { if (0 != $("#cmbReturnAccountsoc_" + s).val()) { var n = "", a = "", c = 0, s = $(this).attr("id").split("_")[1], i = $("#cmbReturnAccountsoc_" + s).val(), d = Number($("#Receiptoc_" + s).val()), r = ($("#lblbillnooc_" + s).text(), Number($("#lblioidoc_" + s).text())), o = $("#txtrepnooc_" + s).val(), l = $("#txtrepdtoc_" + s).val(), u = $("#chkoc_" + s).is(":checked"), h = (Number($("#lblamtc_" + s).text()), Number($("#lblZAccountc_" + s).text())); "-" == r && (r = 0); var p = 0; p = 2 == h ? -1 : h; $("#rdReceipts").is(":checked") ? (c = 2, n = i, $("#rdcash").is(":checked") ? a = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (a = 4)) : $("#rdPayments").is(":checked") ? (c = 1, a = i, $("#rdcash").is(":checked") ? n = $("#ViewBagCash").val() : $("#rdbank").is(":checked") && (n = 4)) : $("#rdContra").is(":checked") && (c = 3, n = $("#craccount").val(), a = i); var b = $("#txtvoucheroc_" + s).val(); "" == b && t++; var m = String($("#txtdescoc_" + s).val()), f = $("#txtreturndt").val(), v = { Amount: d, CrAccount: n, DrAccount: a, VoucherSystemId: b, JournalDate: f, Details: m, IOMasterId: r, ReportNo: o, RepartDate: l, Monthlytaxpurchase: u, TransactionType: c, ZAccount: p }; e.push(v) } }); var n = { JournalDetails: e }; $.ajax({ url: "../ReceiptsandPayments/SaveOutstandings", data: JSON.stringify(n), type: "POST", contentType: "application/json; charset=utf-8", success: function (t) { if ("Success" == t.data) { $("#tbloutstandingcash").html(""), $("#extraoutstabdingcash").hide(), $("#extrareturnscash").show(), $("#tblreturnscash").html(""), PSReturnsCash(), $("#unbind").html(""), $("#hdnUnbilledPannel").hide(), $("#unbind2").html(""), $("#hdnUnbilledPannel2").hide(), $("#submitbuttons").html("<button class='btn btn-info' onclick='btnconfirmcash()'>Submit</button>"), notification("topright", "success", "fa fa-check vd_green", "Success", "Record submitted successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3); var e = "", n = "", a = ""; $("#rdReceipts").is(":checked") ? e = "rep" : $("#rdPayments").is(":checked") && (e = "pay"), $("#ckhsms").is(":checked") && (n = "yes"), $("#ckhmail").is(":checked") && (a = "yes"), $("#ckhshowreport").is(":checked") && ("rep" == e ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t.jid + "&total=rp") : "pay" == e && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVouchergenerate&pid=" + t.jid + "&total=rp")), $.ajax({ type: "get", url: "../stiReport/SendingMailRP", data: { jid: t.jid, ps: e, sms: n, mail: a }, success: function (t) { $("#ckhsms").attr("checked", !1), $("#ckhmail").attr("checked", !1), $("#ckhshowreport").attr("checked", !1) } }) } else "fail" == t.data && notification("topright", "notify", "fa fa-times vd_red", "Error", "Error : " + t.message) }, error: function (t) { alert("Insertion failed ") } }) } }
} function ReceiptsChange() { if ($("#rdReceipts").is(":checked")) { $("#ckhAdjustments").attr("checked", !1), $("#rdcash").is(":checked") ? $("#rdcash").trigger("change") : $("#rdbank").is(":checked") && $("#rdbank").trigger("change"), $("#crsection").hide(), $("#cashmode").show(), $("#divoutstanding").show(), $("#cmbps").val("0"), $("#cmbbill").empty(), $("#psspinner2").show(), $("#tblreturns").find("tr").each(function () { var t = $(this).attr("id").split("_")[1]; $("#tdmode_" + t).show(), $("#tdchkno_" + t).show(), $("#tdchkdt_" + t).show(), $("#thmode").show() }); var t = 2, e = $("#txtreturndt").val(); $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: t, dt: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide(), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSales", data: { mode: 2 }, success: function (t) { $.each(t, function () { $("#cmbps").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }) } }) } } function PaymentsChange() { if ($("#Addlesstab").show(), $("#Generaltab").hide(), $("#rdPayments").is(":checked")) { $("#ckhAdjustments").attr("checked", !1), $("#psspinner2").show(), $("#crsection").hide(), $("#cashmode").show(), $("#divoutstanding").show(), $("#cmbps").val("0"), $("#cmbbill").empty(), $("#rdcash").is(":checked") ? $("#rdcash").trigger("change") : $("#rdbank").is(":checked") && $("#rdbank").trigger("change"), $("#tblreturns").find("tr").each(function () { var t = $(this).attr("id").split("_")[1]; $("#tdmode_" + t).show(), $("#tdchkno_" + t).show(), $("#tdchkdt_" + t).show(), $("#thmode").show() }); var t = 1, e = $("#txtreturndt").val(); $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: t, dt: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide(), $("#cmbps").empty(), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSales", data: { mode: 1 }, success: function (t) { $.each(t, function () { $("#cmbps").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }) } }) } } function ContraChange() { if ($("#Addlesstab").show(), $("#Generaltab").hide(), $("#rdContra").is(":checked")) { $("#crsection").show(), $("#cashmode").hide(), $("#divoutstanding").hide(), $("#tblreturnscash").empty(), PSReturnsCash(), $("#extrareturnscash").show(), $("#extrareturns").hide(), $("#submitbuttons").html("<button class='btn btn-danger' type='button'  onclick='btnconfirmcash()' >Submit</button>"), $("#Inwardcash").hide(), $("#Inwardbank").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#extrareturns").hide(), $("#ckhInward").attr("checked", !1), $("#lblps").text(""), $("#lblbillno").text(""), $("#lblcustomer").text(""); var t = 3, e = $("#txtreturndt").val(); $("#psspinner2").show(), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: t, dt: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide() } }) } } function DeleteAddless(t) { confirm("Are you Sure to delete a record?") && $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/DeleteAddless", data: { id: t }, success: function (e) { if ("success" == e) { var n = document.getElementById("D_" + t).parentNode.id; $("#" + n).remove(), notification("topright", "info", "fa fa-check vd_green", "Success", "Record deleted successfully") } else "fail" == e && notification("topright", "notify", "fa fa-times vd_green", "Error", "Error in submitting form") } }) } function DeleteAddlessAck(t) { confirm("Are you Sure to delete a record?") && $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/DeleteAddlessAck", data: { id: t }, success: function (e) { if ("success" == e) { var n = document.getElementById("D_" + t).parentNode.id; $("#" + n).remove(), notification("topright", "info", "fa fa-check vd_green", "Success", "Record deleted successfully") } else "fail" == e && notification("topright", "notify", "fa fa-times vd_green", "Error", "Error in submitting form") } }) } function AddAddlessAck(t) { $("#aa_" + t).remove(), AddInwardCash() } function AddAddless(t) { $("#aa_" + t).remove(), AddInwardCash() } function GroupPayment() { $("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=GroupPayment&pid=0&total=norp" } function CashBankBook() { var t = $("#FromDate").val(), e = $("#ToDate").val(), n = t + "~" + e; $("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=CashBankBook&pid=" + n + "&total=norp" } function GetTransactionDetails() { $("#Transactionsection").show(), $("#iframereport").show(); var t = $("#hdnCustomerId").val(); document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVouchergenerate&pid=" + t + "&total=rp" } function Voucher() { var t = $("#txtreturndt").val(); $("#rdPayments").is(":checked") ? ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=PaymentsVoucher&pid=" + t + "&total=norp") : $("#rdReceipts").is(":checked") && ($("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").hide(), $("#iframereport").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ReceiptsVoucher&pid=" + t + "&total=norp") } function CancelReport() { $("#mainsection").show(), $("#reportsection").hide() } function TransactionVoucher() { $("#mainsection").hide(), $("#reportsection").show(), $("#Transactionsection").show(), $("#iframereport").hide() } function ContinousVoucher() { var t = $("#FromDate").val(), e = $("#ToDate").val(), n = t + "~" + e; $("#rdPayments").is(":checked") ? ($("#mainsection").hide(), $("#reportsection").show(), document.getElementById("iframereport").src = "/stiReport/Index?form=ContinousPaymentsVoucher&pid=" + n + "&total=norp") : $("#rdReceipts").is(":checked") && ($("#mainsection").hide(), $("#reportsection").show()) } function Onsubmittaccount() { var t = $("#PersonalAccountId").val(), e = $("#AccountId").val(), n = $("#Account").val(), a = $("#NatureId").val(), c = !0, s = { PersonalAccountId: t, AccountId: e, Account: n, NatureId: a, IsPersonal: c }; $.ajax({ url: "../AccountNature/Savetb1", data: JSON.stringify(s), type: "POST", async: !1, contentType: "application/json; charset=utf-8", success: function (t) { if ("success" == t.split("_")[0]) { success(); var e = 0, a = 0; $("#rdcash").is(":checked") ? e = $("#tblreturnscash").find("tr:last").attr("id").split("_")[1] : $("#rdbank").is(":checked") && (a = $("#tblreturns").find("tr:last").attr("id").split("_")[1]), setTimeout(function () { $("#btnCancel").trigger("click"), $("#cmbReturnAccountsc_" + e).empty(), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccountsc_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#cmbReturnAccountsc_" + e).select2(), $("#cmbReturnAccounts_" + a).empty(), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccounts_" + a).append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/selectedAccount", data: { Account: n }, success: function (t) { $("#cmbReturnAccountsc_" + e).val(t), null == $("#cmbReturnAccountsc_" + e).val() && $("#cmbReturnAccountsc_" + e).val(t), $("#select2-cmbReturnAccountsc_" + e + "-container").text(n), $("#select2-cmbReturnAccountsc_" + e + "-container").attr("title", n), $("#cmbReturnAccounts_" + a).val(t), $("#select2-cmbReturnAccounts_" + a + "-container").text(n), $("#select2-cmbReturnAccounts_" + a + "-container").attr("title", n) } }), $("#cmbReturnAccounts_" + a).select2() }, 500) } else "alreadyexists" == t ? $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetAccount_Nature", data: { Account: n }, success: function (t) { notification("topright", "info", "fa fa-exclamation-triangle vd_yellow", "Warning", "Account '" + n + "' with Nature '" + t + "' already exists") } }) : "fail" == t && fail() } }) } $("#Generaltab").hide(), $("#psspinner").hide(), $("#psspinner2").hide(), $(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide(), $("#cmbps").select2(), $("#cmbbill").select2(), $("#txtreturndt").datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, e) { var n = $.datepicker.formatDate("dd/mm/yy", $("#txtreturndt").datepicker("getDate")); $("#txtreturndt").datepicker("setDate", n) }, onSelect: function () { $(this).change(), ReceiptsChange(), PaymentsChange(), ContraChange() } }); var ClassObjs = {}, ClassNames = []; $("#cmbcustomer").typeahead({ source: function (t, e) { $.ajax({ url: "../PurchaseSalesOrder/GetCustomers", cache: !1, success: function (t) { ClassObjs = {}, ClassNames = [], _.each(t, function (t, e, n) { ClassNames.push(t.Text), ClassObjs[t.Text] = t.Value }), e(ClassNames) } }) }, updater: function (t) { return $("#hdnCustomerId").val(ClassObjs[t]), t } }), $("#addnewpersonal").click(function () { $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetControlstb1", data: {}, success: function (t) { $.fn.modal.Constructor.prototype.enforceFocus = function () { }, $("#personalaccount").modal("show"), $("#pbody").html(t), $("#NatureId").select2() } }) }), $("#FromDate").datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, e) { var n = $.datepicker.formatDate("dd/mm/yy", $("#FromDate").datepicker("getDate")); $("#FromDate").datepicker("setDate", n) } }), $("#ToDate").datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, e) { var n = $.datepicker.formatDate("dd/mm/yy", $("#ToDate").datepicker("getDate")); $("#ToDate").datepicker("setDate", n) } }), $("#ChequeDate").datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }), $("#ChequeDate").val($("#ViewCurrentDate").val()), $("#FromDate").val($("#ViewBagFromDateRange").val()), $("#ToDate").val($("#ViewBagToDateRange").val()), $("#txtreturndt").val($("#ViewCurrentDate").val()), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSales", data: { mode: 2 }, success: function (t) { $.each(t, function () { $("#cmbps").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }); var ClassObjs = {}, ClassNames = []; $("#cmbcustomer").typeahead({ source: function (t, e) { $.ajax({ url: "../PurchaseSalesOrder/GetCustomers", cache: !1, success: function (t) { ClassObjs = {}, ClassNames = [], _.each(t, function (t, e, n) { ClassNames.push(t.Text), ClassObjs[t.Text] = t.Value }), e(ClassNames) } }) }, updater: function (t) { return $("#hdnCustomerId").val(ClassObjs[t]), t } }), $("#rdcashAdjustments").on("change", function () { $("#rdcashAdjustments").is(":checked") && $("#bankdetails").hide() }), $("#rdbankAdjustments").on("change", function () { $("#rdbankAdjustments").is(":checked") && $("#bankdetails").show() }); var BrokerObjs = {}, BrokerNames = []; $("#cmbAdjustments").typeahead({ source: function (t, e) { $.ajax({ url: "../ReceiptsandPayments/GetAccounts", cache: !1, success: function (t) { BrokerObjs = {}, BrokerNames = [], _.each(t, function (t, e, n) { BrokerNames.push(t.Text), BrokerObjs[t.Text] = t.Value }), e(BrokerNames) } }) }, updater: function (t) { return $("#hdnAdjustmentId").val(BrokerObjs[t]), t } }), $("#extrareturns").hide(), $("#btnconfirmcash").show(); var mode = 2, dt = $("#txtreturndt").val(); $("#psspinner2").show(), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetGrid", data: { mode: mode, dt: dt }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide() } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#craccount").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#refresh").click(function () { $("#select2-cmbps-container").text("Select PsType"), $("#cmbps").val("0"), $("#select2-cmbbill-container").text("Select PsType"), $("#cmbbill").val("0"), $("#FromDate").val($("#ViewCurrentDate").val()), $("#ToDate").val($("#ViewCurrentDate").val()), productgrid() }), $("#ckhInward").on("change", function () { $(this).is(":checked") ? ($("#psspinner").show(), $("#ckhoutstanding").prop("checked", !1), $("#ckhAdjustments").prop("checked", !1), $("#rdReceipts").is(":checked") ? pid = 2 : $("#rdPayments").is(":checked") && (pid = 1), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetInwardCustomersGrid", data: { pid: pid }, success: function (t) { if ("" != t) { var e = 0; $("#rdReceipts").is(":checked") ? e = 2 : $("#rdPayments").is(":checked") ? e = 1 : $("#rdContra").is(":checked") && (e = 3), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSales", data: { mode: e }, success: function (t) { $.each(t, function () { $("#cmbpsinward").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#tblIwardGrid").html(t), $("#psspinner").hide(), $("#inward").modal("show") } else $("#psspinner").hide(), notification("topright", "info", "fa fa-exclamation-triangle vd_red", "Warning", "No Inwards Found") } })) : ($("#lblps").text(""), $("#lblbillno").text(""), $("#lblcustomer").text("")) }), $("#confirmGeneral").on("hidden.bs.modal", function () { $("#submitbuttons").find("button").attr("disabled", !1) }), $("#cmbpsinward").on("change", function () { $("#cmbbillinward").empty(); var t = $(this).val(); $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSalesBillnos", data: { ps: t }, success: function (t) { $.each(t, function () { $("#cmbbillinward").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetInwardCustomersGridPSFilter", data: { pid: t }, success: function (t) { $("#tblIwardGrid").html(t) } }) }), $("#cmbbillinward").on("change", function () { $.ajax({ type: "get", url: "../ReceiptsandPayments/GetInwardCustomersGridPSbill", data: { bill: $("#cmbbillinward :selected").text() }, success: function (t) { $("#tblIwardGrid").html(t) } }) }), $("#closeBpopup").click(function () { $("#ckhoutstanding").attr("checked", !1) }), $("#srch-term").keyup(function () { searchTable3($(this).val()) }), $("#srch-term2").keyup(function () { searchTable2($(this).val()) }), $("#srch-term3").keyup(function () { searchTable($(this).val()) }), $("#btnFetch").click(function () { var t = ""; $("#ckhInward").attr("checked", !1); var e = ""; $("#tblProductGrid2").find("tr").each(function () { if ($(this).attr("id").indexOf("un_") >= 0) { var n = $(this).attr("id"), a = n.split("_")[1], c = Number(n.split("_")[2]); 0 != c && (e = e + " " + a + " : " + Math.round(c, 2) + " Rs. ,") } else { var s = $(this).attr("id").replace("trr_", ""); $("#" + s).find("input[type='checkbox']").each(function () { if ($(this).is(":checked")) { var e = $(this).attr("id").replace("chk_", ""), n = $("#" + s).find("td:last").html(); t = t + e + "_" + n + "," } }) } }); var n = ""; $("#rdcash").is(":checked") ? n = "cash" : $("#rdbank").is(":checked") && (n = "bank"); var a = 0; a = $("#rdReceipts").is(":checked") ? 1 : $("#rdPayments").is(":checked") ? 2 : 0; var c = 0, s = 0; 0 != $("#tblreturnscash").find("tr").length ? c = $("#tblreturnscash").find("tr").length : 0 != $("#tblreturns").find("tr").length && (s = $("#tblreturns").find("tr").length), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomerGridData", data: { waybill: t, mode: n, pid: a, cash: c, bank: s }, success: function (t) { var e = t.split("~")[1], n = t.split("~")[0]; if ($("#closeBpopup").trigger("click"), $("#rdcash").is(":checked")) { "" != e ? ($("#hdnUnbilledPannel").show(), $("#unbind").html(e)) : ($("#hdnUnbilledPannel").hide(), $("#unbind").html("")), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").show(), $("#extrareturnscash").hide(), $("#extrareturns").hide(), $("#submitbuttons").html("<button class='btn btn-warning' onclick='btnconfirmOutCash()'>Submit</button>"), $("#Inwardbank").hide(), $("#Inwardcash").hide(); var a = ""; 0 != $("#tblreturnscash").find("tr").length && ($("#tblreturnscash").find("tr").each(function () { var t = $(this).attr("id").split("_")[1]; if ($("#cmbReturnAccountsc_" + t).val() > 0 && $("#Receiptc_" + t).val() > 0) { var e = $("#cmbReturnAccountsc_" + t).val(), n = ($("#cmbReturnAccountsc_" + t + " :selected").text(), $("#Receiptc_" + t).val()), c = $("#txtvoucherc_" + t).val(), s = $("#txtdescc_" + t).val(), i = $("#txtrepnoc_" + t).val(), d = $("#txtrepdtc_" + t).val(); a = a + "<tr id='trroc_" + t + "'><td id='tdReturnAccountoc_" + t + "' ><select style='width:200px'  id='cmbReturnAccountsoc_" + t + "'  class='mustprovide'></select> </td><td ><input type='text'   id='Receiptoc_" + t + "' onkeypress='return isNumberStudentMarksKey(event)' value='" + n + "'  class='mustprovide' onblur='CalTotal(this)' /></td><td><input type=text id='txtvoucheroc_" + t + "' value='" + c + "'/></td><td><input type=text id='txtdescoc_" + t + "' value='" + s + "'/></td><td class='notmonthly'><input type=text id='txtrepnooc_" + t + "' value='" + i + "'/></td><td class='notmonthly'><input type=text id='txtrepdtoc_" + t + "' value='" + d + "'/></td><td><label id='txtpsoc_" + t + "'>-</label></td><td><label id='lblbillnooc_" + t + "'>-</label></td><td><label id='lblioidoc_" + t + "'>-</label></td><td class='hide' id='lblamtc_" + t + "'>-</td><td class='hide' id='lblZAccountc_" + t + "'>-</td><td><button class='btn btn-info btn-xs'  type='button'  onclick='AddingreturnRowcash(" + t + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#txtrepdtc_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtc_" + t).datepicker("getDate")); $("#txtrepdtc_" + t).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (n) { $.each(n, function () { $("#cmbReturnAccountsoc_" + t).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccountsoc_" + t).val(e) } }) } }), $("#tbloutstandingcash").html(a + n)) } else if ($("#rdbank").is(":checked")) { "" != e ? ($("#hdnUnbilledPannel2").show(), $("#unbind2").html(e)) : ($("#hdnUnbilledPannel2").hide(), $("#unbind2").html("")), $("#extraoutstabding").show(), $("#extraoutstabdingcash").hide(), $("#extrareturnscash").hide(), $("#extrareturns").hide(), $("#submitbuttons").html("<button class='btn btn-success' onclick='btnconfirmOutBank()'>Submit</button>"), $("#Inwardbank").hide(), $("#Inwardcash").hide(); var a = ""; 0 != $("#tblreturns").find("tr").length && $("#tblreturns").find("tr").each(function () { var e = $(this).attr("id").split("_")[1]; if ($("#cmbReturnAccounts_" + e).val() > 0 && $("#Receipt_" + e).val() > 0) { var n = $("#cmbReturnAccounts_" + e).val(), c = ($("#cmbReturnAccounts_" + e + " :selected").text(), $("#Receipt_" + e).val()), s = $("#txtvoucher_" + e).val(), i = $("#txtdesc_" + e).val(), d = $("#txtrepno_" + e).val(), r = $("#txtrepdt_" + e).val(), o = $("#cmbtrans_" + e).val(), l = ($("#cmbtrans_" + e + " :selected").text(), $("#txtchkno_" + e).val(), $("#txtchkdt_" + e).val()); a = a + "<tr id='trrob_" + e + "'><td id='tdReturnAccountob_" + e + "'><select style='width:200px' id='cmbReturnAccountsob_" + e + "' class='mustprovide'  >", a = a + "</select></td><td ><input type='text' style='width:160px'  id='Receiptob_" + e + "' value='" + c + "' style='width:160px' onkeypress='return isNumberStudentMarksKey(event)' class='mustprovide'  /></td><td><input type=text id='txtvoucherob_" + e + "' value='" + s + "'/></td><td><input type=text id='txtdescob_" + e + "' style='width:160px' value='" + i + "'/></td><td><input type=text id='txtrepnoob_" + e + "' value='" + d + "'/></td><td><input type=text id='txtrepdtob_" + e + "' value='" + r + "'/></td><td><select id='cmbBankob_" + e + "' style='width:160px' onchange='Getrelatedcheques(this)'>", a += "</select></td>", t = $("#rdPayments").is(":checked") ? t + "<td id='tdchkno_" + rowid + "' ><select style='width:100px' id='ddlchknoob_" + rowid + "'></select></td>" : t + "<td id='tdchkno_" + rowid + "'><input type='text'  id='txtchequeob_" + rowid + "'  /></td>", a = a + "<td><input type=text id='txtchequedtob_" + e + "' value='" + l + "'/></td><td><label id='txtpsob_" + e + "'>-</label></td><td><label id='lblbillnoob_" + e + "'>-</label></td><td><label id='lblioidob_" + e + "'>-</label></td><td class='hide' id='lblamtb_" + e + "'>-</td><td class='hide' id='lblZAccountb_" + e + "'>-</td><td><button class='btn btn-info btn-xs'  type='button'  onclick='AddOutstandingRowid(" + e + ")'><i class='fa fa-plus'></i></button></td></tr>", $("#txtrepdtob_" + e).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtc_" + e).datepicker("getDate")); $("#txtrepdtob_" + e).datepicker("setDate", a) } }), $.ajax({ type: "get", url: "../Purchase_Sales/GetSubAccount", data: {}, success: function (t) { $.each(t, function () { $("#cmbReturnAccountsob_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbReturnAccountsob_" + e).val(n) } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (t) { $.each(t, function () { $("#cmbBankob_" + e).append("<option value=" + this.Value + ">" + this.Text + "</option>") }), $("#cmbBankob_" + e).val(o) } }) } }), $("#tbloutstanding").html(a + n), $("#tbloutstanding").find("tr").each(function () { var t = $(this).attr("id").split("_")[1]; $("#txtrepdtob_" + t).datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (e, n) { var a = $.datepicker.formatDate("dd/mm/yy", $("#txtrepdtob_" + t).datepicker("getDate")); $("#txtrepdtob_" + t).datepicker("setDate", a) } }), $("#txtchequedtob_" + t).datepicker({ dateFormat: "dd/mm/yy", changeMonth: !0, changeYear: !0, yearRange: "-100y:c+nn" }) }) } } }) }), $("#craccount").select2(), $("#crsection").hide(), $("#ckhoutstanding").on("change", function () { if ($("#ckhoutstanding").is(":checked")) { $("#psspinner").show(), $("#ckhAdjustments").prop("checked", !1), $("#ckhInward").prop("checked", !1), $("#lblps").text(""), $("#lblbillno").text(""), $("#lblcustomer").text(""); var t = 0; $("#rdReceipts").is(":checked") ? t = 2 : $("#rdPayments").is(":checked") && (t = 1), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/GetCustomerGrid", data: { pid: t }, success: function (t) { if ("" != t) if ("fail" == t) $("#psspinner").hide(), notification("topright", "info", "fa fa-exclamation-triangle vd_red", "Warning", "No Outstanding Found"); else { var e = 0; $("#rdReceipts").is(":checked") ? e = 2 : $("#rdPayments").is(":checked") ? e = 1 : $("#rdContra").is(":checked") && (e = 3), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSales", data: { mode: e }, success: function (t) { $.each(t, function () { $("#cmbpsout").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#FromDateout").val($("#ViewCurrentDate").val()), $("#ToDateout").val($("#ViewCurrentDate").val()), $("#FromDateout").datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, e) { var n = $.datepicker.formatDate("dd/mm/yy", $("#FromDateout").datepicker("getDate")); $("#FromDateout").datepicker("setDate", n) } }), $("#ToDateout").datepicker({ dateFormat: "dd/mm/yy", defaultDate: new Date, minDate: $("#ViewBagFromDateRange").val(), maxDate: $("#ViewBagToDateRange").val(), yearRange: $("#ViewBagDateRange").val(), changeMonth: !0, changeYear: !0, onClose: function (t, e) { var n = $.datepicker.formatDate("dd/mm/yy", $("#ToDateout").datepicker("getDate")); $("#ToDateout").datepicker("setDate", n) } }), $("#tblIOGrid2").show(), $("#tblProductGrid2").html(t); var n = 0; $("#tblProductGrid2").find("tr").each(function () { $(this).find("td:last").text() && "success" != $(this).attr("class") && (n += Number($(this).find("td:last").text())) }), $("#outstandingtotal").html(' <label class="vd_blue pull-right">Total Amount : ' + n + " Rs/-</label>"), $("#psspinner").hide(), $("#outstanding").modal("show") } else $("#psspinner").hide(), notification("topright", "info", "fa fa-exclamation-triangle vd_red", "Warning", "No Outstanding Found") } }) } }), $("#cmbpsout").on("change", function () { var t = $(this).val(); $("#cmbbillout").empty(), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSalesBillnos", data: { ps: t }, success: function (t) { $.each(t, function () { $("#cmbbillout").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomersGridOutPS", data: { pid: t }, success: function (t) { $("#tblProductGrid2").html(t) } }) }), $("#cmbbillout").on("change", function () { $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomersGridOutBill", data: { bill: $("#cmbbillout :selected").text() }, success: function (t) { $("#tblProductGrid2").html(t) } }) }), $("#rdcash").on("change", function () {
    if ($(".notmonthly").show(), $(".monthly").hide(), $("#rdcash").is(":checked")) {
        if ($("#tblreturns").html(""), $("#tblreturnscash").html(""),
        0 == $("#tblreturnscash tr").length) PSReturnsCash(); else { var t = $("#tblreturnscash tr:nth-child(1)").attr("id").split("_")[1]; 0 != $("#cmbReturnAccountsc_" + t).val() && PSReturnsCash() } $("#extrareturnscash").show(), $("#extrareturns").hide(), $("#submitbuttons").html("<button class='btn btn-info' onclick='btnconfirmcash()'>Submit</button>"), $("#Inwardbank").hide(), $("#Inwardcash").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#ckhInward").prop("checked", !1), $("#ckhoutstanding").prop("checked", !1)
    }
}), $("#rdbank").on("change", function () { if ($(".notmonthly").show(), $(".monthly").hide(), $("#rdbank").is(":checked")) { if ($("#tblreturnscash").html(""), $("#tblreturns").html(""), 0 == $("#tblreturns tr").length) PSReturns(); else { var t = $("#tblreturns tr:nth-child(1)").attr("id").split("_")[1]; 0 != $("#cmbReturnAccounts_" + t).val() && PSReturns() } $("#extrareturns").show(), $("#extrareturnscash").hide(), $("#extraoutstabding").hide(), $("#extraoutstabdingcash").hide(), $("#Inwardbank").hide(), $("#Inwardcash").hide(), $("#submitbuttons").html("<button class='btn btn-info' onclick='btnconfirm()'>Submit</button>"), $("#ckhInward").prop("checked", !1), $("#ckhoutstanding").prop("checked", !1) } }), $("#cmbps").on("change", function () { $("#psspinner2").show(), $(".blockUI").show(), $(".blockUI blockOverlay").show(), $(".blockUI blockMsg blockElement").show(); var t = $(this).val(); $("#cmbbill").empty(); var e = 0; $("#rdReceipts").is(":checked") ? e = 2 : $("#rdPayments").is(":checked") ? e = 1 : $("#rdContra").is(":checked") && (e = 3), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetPurchaseSalesBillnos", data: { ps: t }, success: function (t) { $.each(t, function () { $("#cmbbill").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }); var n = $("#txtreturndt").val(); $.ajax({ type: "get", url: "../ReceiptsandPayments/GetReceiptspaymentsGridPs", data: { dt: n, ps: t, mode: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide(), $(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide() } }) }), $("#cmbbill").on("change", function () { $("#psspinner2").show(), $(".blockUI").show(), $(".blockUI blockOverlay").show(), $(".blockUI blockMsg blockElement").show(); var t = $("#txtreturndt").val(), e = 0, n = $("#cmbbill :selected").text(); $("#rdReceipts").is(":checked") ? e = 2 : $("#rdPayments").is(":checked") ? e = 1 : $("#rdContra").is(":checked") && (e = 3), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetReceiptspaymentsGridBills", data: { dt: t, bill: n, mode: e }, success: function (t) { $("#bottomgrid").html(t); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>"), $("#psspinner2").hide(), $(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide() } }) }), $("#buttnGo").click(function () { $("#psspinner2").show(); var t = $("#FromDate").val(), e = $("#ToDate").val(), n = 0; $("#cmbps").val(); $("#rdReceipts").is(":checked") ? n = 2 : $("#rdPayments").is(":checked") ? n = 1 : $("#rdContra").is(":checked") && (n = 3), $.ajax({ type: "get", url: "../ReceiptsPaymentsContra/BottomGridDateSort", data: { frmdt: t, todt: e, mode: n }, success: function (t) { $("#bottomgrid").html(t), $("#psspinner2").hide(); var e = 0, n = 0; $("#tblProductGrid").find("tr").each(function () { var t = $(this).find("td:nth-child(7)").text().trim(); if ("Cash" == t) { var a = Number($(this).find("td:nth-child(4)").text()); e += a } else { var a = Number($(this).find("td:nth-child(4)").text()); n += a } }), $("#cashbankamount").html("<lable class='label vd_bg-blue vd_white'>Cash: " + e + "</lable> <span><lable class='label vd_bg-green vd_white'>Bank: " + n + "</lable></span>") } }) }), $("#buttnGooout").click(function () { var t = $("#FromDateout").val(), e = $("#ToDateout").val(), n = 0, a = $("#cmbpsout").val(); $("#rdReceipts").is(":checked") ? n = 2 : $("#rdPayments").is(":checked") ? n = 1 : $("#rdContra").is(":checked") && (n = 3), $.ajax({ type: "get", url: "../ReceiptsandPayments/GetCustomersGridOutFromToDate", data: { frmdt: t, todt: e, mode: n, ps: a }, success: function (t) { $("#tblProductGrid2").html(t) } }) }), $("#ckhAdjustments").on("change", function () { $("#adjtitle").text("Adjustments"), $("#rdReceipts").is(":checked") ? $("#ckhAdjustments").is(":checked") && ($("#ckhoutstanding").prop("checked", !1), $("#ckhInward").prop("checked", !1), $("#Adjustmentbtn").hide(), $("#Addlessbtn").show(), $("#toggleAdjustment").val("0"), $("#cmbBankAdjustments").empty(), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (t) { $.each(t, function () { $("#cmbBankAdjustments").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#unbillpara").html(""), $("#lblps").html(""), $("#lblbillno").html(""), $("#lblcustomer").html(""), $("#divInward").hide(), $("#diAdjust").show(), $("#hdnio").val(""), $("#amountinfo").html(""), $.fn.modal.Constructor.prototype.enforceFocus = function () { }, $("#Adjustments").modal("show")) : $("#rdPayments").is(":checked") && $("#ckhAdjustments").is(":checked") && $("#ckhAdjustments").is(":checked") && ($("#ckhoutstanding").prop("checked", !1), $("#ckhInward").prop("checked", !1), $("#cmbBankAdjustments").empty(), $("#Adjustmentbtn").hide(), $("#Addlessbtn").show(), $("#toggleAdjustment").val("0"), $.ajax({ type: "get", url: "../ReceiptsandPayments/Getbanks", data: {}, success: function (t) { $.each(t, function () { $("#cmbBankAdjustments").append("<option value=" + this.Value + ">" + this.Text + "</option>") }) } }), $("#unbillpara").html(""), $("#lblps").html(""), $("#lblbillno").html(""), $("#lblcustomer").html(""), $("#divInward").hide(), $("#diAdjust").show(), $("#toggleAdjustment").val("0"), $("#amountinfo").html(""), $("#hdnio").val(""), $.fn.modal.Constructor.prototype.enforceFocus = function () { }, $("#Adjustments").modal("show")) }), $("#txtreturndt").on("change", function () { $("#psspinner3").show(), $("#psspinner4").show(); var t = $("#txtreturndt").val(); $.ajax({ type: "get", url: "../ReceiptsandPayments/getopeningclosing", data: { dt: t }, success: function (t) { $("#openingbal").val(t.split(",")[0]), $("#closingbal").val(t.split(",")[1]), $("#psspinner3").hide(), $("#psspinner4").hide() } }) }), OpeningClosingBal(), PSReturnsCash(), $("#yes").click(function () { $("#no").trigger("click"), $(".blockUI").show(), $(".blockUI blockOverlay").show(), $(".blockUI blockMsg blockElement").show(); var t = $("#deletingid").val(); $.ajax({ type: "POST", url: "../ReceiptsandPayments/DeleteFromJournal", data: { id: t }, success: function (t) { "success" == t ? ($(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide(), notification("topright", "info", "fa fa-info-circle vd_blue", "Info Notification", "Record Deleted Successfully"), OpeningClosingBal(), setTimeout(productgrid(), 2e3)) : ($(".blockUI").hide(), $(".blockUI blockOverlay").hide(), $(".blockUI blockMsg blockElement").hide(), notification("topright", "info", "fa fa-times vd_red", "Error", "Error in Record Deletion")) } }) });