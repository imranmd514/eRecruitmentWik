@model Models.AllJobsBO

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.2.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.8.1/jquery.validate.js">
</script>
<div class="wrapper">
    <div class="container-fluid">
        <!-- Page title box -->
        <div class="page-title-alt-bg"></div>
        <div class="page-title-box">
            <ol class="breadcrumb float-right">
                <li class="breadcrumb-item"><a href="javascript:void(0);">Jobs</a></li>
                <li class="breadcrumb-item active">All Jobs</li>
            </ol>
            <h4 class="page-title"><i class="mdi mdi-account-multiple" style="color:black;"></i><b>All Jobs</b></h4>
        </div>
    </div>
    <div class="col-lg-12">
        <div class="form-group row">
            <div class="col-sm-12">
                <div style="width:99%" align="right">
                    <button type="button" class="btn btn-success btn-xs btn-rounded waves-effect waves-light w-md" id="success" onclick="Approve();">Approve</button>
                    <button type="button" class="btn btn-danger btn-xs btn-rounded w-md" onclick="Reject();">Reject</button>
                    @*<button type="button" class="btn btn-primary btn-xs btn-rounded w-md" onclick="OnHold();">On Hold</button>*@
                    <button type="button" class="btn btn-secondary btn-rounded w-md" onclick="Cancel();">Cancel</button>
                </div>
            </div>
        </div>
        <div class="card-box">
            <div class="row">
                @Html.HiddenFor(m => m.JobPostingId)
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Name <span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.JobName, new { @placeholder = "Job Name", @class = "form-control", id = "JobName", @maxLength = "50" })
                        </div>
                    </div><br />
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Code<span class="text-danger">*</span></label>
                        <div class="col-sm-7">

                            @Html.TextBoxFor(model => model.JobCode, new { @placeholder = "Job Code", @class = "form-control", id = "JobCode", @maxLength = "50" })
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Description</label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.JobDescription, new { @placeholder = "Job Description", @class = "form-control", id = "JobDescription", @maxLength = "50" })
                        </div>
                    </div><br />
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">No Of Positions<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.NoOfPositions, new { @placeholder = "No Of Positions Required", @class = "form-control", id = "NoOfPositions", @maxLength = "7" })
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Donor Program<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.DropDownListFor(model => model.DonorProgramId, new SelectList(Model.DonorProgrammList, "Id", "value"), "Select DonorProgram", new { @placeholder = "Donor Program", @class = "form-control", id = "DonorProgram", @maxLength = "7" })
                        </div>
                    </div><br>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Location</label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.JobLocation, new { @placeholder = "JobLocation", @class = "form-control", id = "JobLocation", @maxLength = "50" })
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Timings</label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.JobTimings, new { @placeholder = "Job Timings", @class = "form-control", id = "JobTimings", @maxLength = "50" })
                        </div>
                    </div><br>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Job Duration</label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.JobDuration, new { @placeholder = "Job Duration", @class = "form-control", id = "JobDuration", @maxLength = "50" })
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Qualification<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.Qualification, new { @placeholder = "Qualification", @class = "form-control", id = "Qualification", @maxLength = "50" })
                        </div>
                    </div><br>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-xs-0">
                        <label class="col-sm-5">Experience<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.Experience, new { @placeholder = "Experience", @class = "form-control", id = "Experience", @maxLength = "50" })

                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">Skills<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextBoxFor(model => model.Skills, new { @placeholder = "Skills", @class = "form-control", id = "Skills", @maxLength = "50" })
                        </div>
                    </div>
                </div>
                <br />
                <div class="col-sm-6">
                    <div class="row mgbt-sm-0">
                        <label class="col-sm-5">HR Comments<span class="text-danger">*</span></label>
                        <div class="col-sm-7">
                            @Html.TextAreaFor(model => model.HROffice_Comments, new { @placeholder = "Comments", @class = "form-control", id = "HRComments", @maxLength = "50" })
                        </div>
                    </div>
                </div>
            </div> <!-- end row -->
        </div> <!-- end card-box -->
    </div> <!-- end col -->
</div>

<script type="text/javascript">
    $(document).ready(function () {

    });


    function Approve() {
        debugger;
        var str = "";

        if ($("#Comments").val() == "") {
            str = str + "<i class='fa fa-bookmark vd_yellow'></i> &nbsp;Comments is Required. <br />";
        }
        if (str != "") {
            $.NotificationApp.send("Information!", "Check below fields please." + str, 'top-right', '#da8609', 'warning');
        }

        else {

            var JobPostingId = $("#JobPostingId").val();
            var JobName = $("#JobName").val();
            var JobCode = $("#JobCode").val();
            var JobDescription = $("#JobDescription").val();
            var NoOfPositions = $("#NoOfPositions").val();
            var DonorProgramId = $("#DonorProgram").val();
            var JobLocation = $("#JobLocation").val();
            var JobTimings = $("#JobTimings").val();
            var JobDuration = $("#JobDuration").val();
            var Qualification = $("#Qualification").val();
            var Experience = $("#Experience").val();
            var Skills = $("#Skills").val();
            var HRComments = $("#HRComments").val();
            var IsActive = $("#IsActive").is(':checked');

            var Data = {
                "JobPostingId": JobPostingId,
                "JobName": JobName,
                "JobCode": JobCode,
                "JobDescription": JobDescription,
                "NoOfPositions": NoOfPositions,
                "DonorProgramId": DonorProgramId,
                "JobLocation": JobLocation,
                "JobTimings": JobTimings,
                "JobDuration": JobDuration,
                "Qualification": Qualification,
                "Experience": Experience,
                "Skills": Skills,
                "HROffice_Comments": HRComments,
                "IsActive": IsActive,
            }

            SaveHRApprovedJob(Data);
        }

        function SaveHRApprovedJob(Data) {

            $.ajax({
                url: '../HROffice/SaveHRApprovedJob',
                data: JSON.stringify(Data),
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                success: function (data) {
                    if (data == "SUCCESS") {
                        GoMenu();
                           $.NotificationApp.send("Success!", "AllJobs created successfully !!", 'top-right', '#5ba035', 'success');
                    }
                    else if (data == "ALREADY_EXISTS") {
                         //  alreadyexists();
                          $.NotificationApp.send("Warning!", "Already Exists.", 'top-right', '#da8609', 'warning');

                    }
                    else if (data == "FAIL") {
                        fail();
                    }
                }
            });
        }
    }

    function Reject() {

        var JobPostingId = $("#JobPostingId").val();
        var JobName = $("#JobName").val();
        var JobCode = $("#JobCode").val();
        var JobDescription = $("#JobDescription").val();
        var NoOfPositions = $("#NoOfPositions").val();
        var DonorProgramId = $("#DonorProgram").val();
        var JobLocation = $("#JobLocation").val();
        var JobTimings = $("#JobTimings").val();
        var JobDuration = $("#JobDuration").val();
        var Qualification = $("#Qualification").val();
        var Experience = $("#Experience").val();
        var Skills = $("#Skills").val();
        var HRComments = $("#HRComments").val();
        var ApprovedDate = $("#ApprovedDate").val();
        var RejectedDate = $("#RejectedDate").val();
        var MarketedDate = $("#MarketedDate").val();
        var IsActive = $("#IsActive").is(':checked');

        var Data = {
            "JobPostingId": JobPostingId,
            "JobName": JobName,
            "JobCode": JobCode,
            "JobDescription": JobDescription,
            "NoOfPositions": NoOfPositions,
            "DonorProgramId": DonorProgramId,
            "JobLocation": JobLocation,
            "JobTimings": JobTimings,
            "JobDuration": JobDuration,
            "Qualification": Qualification,
            "Experience": Experience,
            "Skills": Skills,
            "HROffice_Comments": HRComments,
            "ApprovedDate": ApprovedDate,
            "RejectedDate": RejectedDate,
            "MarketedDate": MarketedDate,
            "IsActive": IsActive,
        }

        SaveRejectedJob(Data);
    }


    function SaveRejectedJob(Data) {

        $.ajax({
            url: '../HROffice/SaveHRRejectedJob',
            data: JSON.stringify(Data),
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "SUCCESS") {
                    //  $.NotificationApp.send("Success!", "AllJobs created successfully !!", 'top-right', '#5ba035', 'success');
                    GoMenu();
                }
                else if (data == "ALREADY_EXISTS") {
                    //     $.NotificationApp.send("Warning!", "Already Exists.", 'top-right', '#da8609', 'warning');
                    alreadyexists();
                }
                else if (data == "FAIL") {
                    fail();
                }
            }
        });
    }

    function Cancel() {
        var url = '@Url.Action("Index", "HROffice")';
        window.location.href = url;
    }

    function GoMenu() {
        var url = '@Url.Action("Index", "HROffice")';
        window.location.href = url;
    }
</script>